// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at http://mozilla.org/MPL/2.0/.

@import '../../sandstone/lib.less';
@import 'common.less';

#wrapper {
    margin-top: 0;
    top: -145px; // family nav
}

// animation defaults
.fallback {
    display: block;
    margin: 0 auto;
}

.stage {
    display: none;
}

#intro {
    background: #B1D2E3 url(/media/img/firefox/desktop/index/bg-intro.png) left top repeat-x;

    .container {
        position: relative;
        padding: 50px 0 0 0;
        min-height: 0;
    }

    h1 {
        .font-size(64px);
    }

    .lead {
        color: @textColorSecondary;
        .font-size(22px);
        margin-bottom: @baseLine * 2;
    }
}

// download buttons
#overview-intro-download-wrapper {
    .fx-privacy-link {
        a:link,
        a:visited {
            color: @linkBlue
        }
    }
}

// let JS decide if we should show the intro download button
.js #overview-intro-download-wrapper {
    display: none;
}

#sticky-download-desktop {
    display: none;
}

// up to date message

#overview-intro-up-to-date {
    display: none;
    padding: 10px 0 20px;
    font-style: italic;

    &.active {
        display: block;
    }

    &:before {
        display: inline-block;
        content: '';
        width: 24px;
        height: 24px;
        background: transparent url(/media/img/firefox/template/icon-check.svg) left top no-repeat;
        margin-right: 5px;
        vertical-align: text-bottom;
    }
}

html[lang^="en"] #sticky-download-desktop .download-link .download-content {
    padding: 10px 20px;
}

#trust {
    background: #fcfcfa url(/media/img/firefox/desktop/bg-pixelfox-new.png) center bottom no-repeat;

    a {
        .open-sans;
    }
}

#customize {
    background: #0095dd;

    .container {
        .container-dark();
        min-height: 0;
        padding-bottom: 0;

        a {
            color: #fff;
            .open-sans;
        }
    }

    .cta {
        position: absolute;
        bottom: 60px;
        left: 80px;
        width: 500px;
    }
}

.cssanimations {
    .fallback {
        display: none;
    }

    .stage {
        display: block;
        position: relative;
        .transition(opacity 0.2s ease);

        &.resetting {
            opacity: 0;
        }
    }

    #customize {
        .animation-wrapper {
            margin-top: @baseLine * 2;

            .stage {
                width: 929px;
                height: 456px;
                margin: 0 auto;
                background: url(/media/img/firefox/desktop/index/animations/flexible-sprite.png) left top no-repeat;

                div {
                    opacity: 0;
                    position: absolute;
                    background-image: url(/media/img/firefox/desktop/index/animations/flexible-sprite.png);
                    background-repeat: no-repeat;
                }
            }
        }

        //// 1. TOOLBAR
        #toolbar {
            z-index: 1;
            opacity: 1;
            top: 45px;
            left: 0;
            width: 915px;
            height: 51px;
            background: none;
        }
        #toolbar-customize-orange {
            right: 0;
            top: 0;
            width: 58px;
            height: 51px;
            background-position: left -600px;
        }

        #toolbar-outline {
            left: 7px;
            top: 2px;
            width: 844px;
            height: 47px;
            background-position: left -540px;
        }

        #toolbar-print {
            width: 23px;
            height: 19px;
            left: 654px;
            top: 16px;
            background-position: -60px -600px;
        }

        .toolbar {
            left: 39px;
            top: 9px;
            height: 33px;
        }

        #toolbar-after {
            width: 595px;
            z-index: 2;
            background-position: left -500px;
        }

        #toolbar-before {
            opacity: 1;
            width: 638px;
            z-index: 1;
            background-position: left -460px;
        }

        //// 2. PANEL
        #panel-wrapper {
            z-index: 2;
            opacity: 1;
            top: 96px;
            right: 0;
            width: 262px;
            height: 347px;
            padding: 9px 9px 0 9px;
            background: #3382aa;
            background: none;
        }

        // icons
        .icon {
            width: 65px;
            height: 65px;
        }

        .icon-history {
            background-position: -345px -725px;
        }

        #panel-icon-print {
            top: 92px;
            left: 14px;
            background-position: -345px -660px;
        }

        #panel-icon-settings {
            top: 92px;
            left: 101px;
            background-position: -410px -660px;
        }

        #panel-icon-fullscreen {
            top: 92px;
            left: 186px;
            background-position: -475px -660px;
        }

        #panel-icon-search {
            top: 164px;
            left: 14px;
            background-position: -410px -790px;
        }

        #panel-icon-addons {
            top: 164px;
            left: 101px;
            background-position: -280px -725px;
        }

        #panel #panel-icon-history {
            opacity: 0;
            top: 164px;
            left: 186px;
        }

        #panel #panel-icon-empty {
            opacity: 0;
            top: 164px;
            left: 186px;
            background-position: -280px -660px;
        }

        #panel {
            z-index: 1;
            opacity: 0;
            width: 262px;
            height: 296px;
            right: 0;
            top: 0;
            background-position: left -660px;
            -webkit-transform: translateY(-20px);
            transform: translateY(-20px);

            .icon {
                opacity: 1;
            }
        }

        .panel-footer {
            bottom: 1px;
            left: 1px;
            width: 260px;
            height: 52px;
        }

        #panel-footer-ok {
            z-index: 2;
            background-position: -640px -600px;
        }

        #panel-footer-on {
            z-index: 1;
            background-position: -380px -600px;
        }

        #panel-footer {
            z-index: 3;
            opacity: 1;
            background-position: -120px -600px;
            text-align: right;
            .font-size(@baseFontSize);

            a {
                display: inline-block;
                margin: 15px 10px 0 0;
                color: #ff7200;
                text-shadow: none;
                .clearfix();
            }

            span {
                float: right;
            }
        }

        #flexible-replay {
            opacity: 0;
        }

        #panel-replay {
            opacity: 1;
            background-position: -100px -600px;
            width: 13px;
            height: 13px;
            display: inline;
            position: relative;
            float: right;
            margin: 5px 5px 0 0;
        }

        //// 3. AVAILABLE ICONS
        #available-icons {
            z-index: 3;
            top: 129px;
            right: 294px;
            width: 474px;
            height: 65px;
            background: none;

            .icon {
                opacity: 1;
            }
        }

        #available-left-group {
            opacity: 1;
            top: 0;
            left: 0;
        }

        #available-icon-openfile {
            left: 0;
            background-position: -345px -790px;
        }

        #available-icon-email {
            left: 79px;
            background-position: -410px -725px;
        }

        #available-icon-subscribe {
            left: 158px;
            background-position: -280px -790px;
        }

        #available-icon-encoding {
            left: 237px;
            background-position: -475px -790px;
        }

        #available-icon-history {
            left: 316px;
        }

        #available-icon-tabgroups {
            left: 395px;
            background-position: -475px -725px;
        }
    }

    #customize .animation-wrapper.animate {
        @-webkit-keyframes toolbar-customize-orange {
            29.9% { opacity: 0; }
            30% { opacity: 1; }
            50% {
                opacity: 1;
                -webkit-transform: scale3d(1.2, 1.2, 0);
                transform: scale3d(1.2, 1.2, 0);
            }
            100% {
                opacity: 1;
            }
        }
        @keyframes toolbar-customize-orange {
            29.9% { opacity: 0; }
            30% { opacity: 1; }
            50% {
                opacity: 1;
                -webkit-transform: scale3d(1.2, 1.2, 0);
                transform: scale3d(1.2, 1.2, 0);
            }
            100% {
                opacity: 1;
            }
        }

        @-webkit-keyframes toolbar-outline-in {
            100% { opacity: 1; }
        }
        @keyframes toolbar-outline-in {
            100% { opacity: 1; }
        }

        @-webkit-keyframes toolbar-outline-out {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }
        @keyframes toolbar-outline-out {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        @-webkit-keyframes toolbar-before {
            99.9% { opacity: 1; }
            100% { opacity: 0; }
        }
        @keyframes toolbar-before {
            99.9% { opacity: 1; }
            100% { opacity: 0; }
        }

        @-webkit-keyframes toolbar-after {
            99.9% { opacity: 0; }
            100% { opacity: 1; }
        }
        @keyframes toolbar-after {
            99.9% { opacity: 0; }
            100% { opacity: 1; }
        }

        @-webkit-keyframes toolbar-print {
            1% {
                opacity: 0.4;
                -webkit-transform: scale3d(1.9, 2, 0);
                transform: scale3d(1.9, 2, 0);
            }
            100% {
                opacity: 1;
            }
        }
        @keyframes toolbar-print {
            1% {
                opacity: 0.4;
                -webkit-transform: scale3d(1.9, 2, 0);
                transform: scale3d(1.9, 2, 0);
            }
            100% {
                opacity: 1;
            }
        }

        #toolbar-customize-orange {
            .animation(toolbar-customize-orange 0.2s ease 0.2s 1 normal forwards);
        }

        #toolbar-outline {
            @animations: toolbar-outline-in 0.2s ease 1.9s 1 normal forwards,
                         toolbar-outline-out 0.2s ease 4.7s 1 normal forwards;
            .animation(@animations);
        }

        #toolbar-before {
            .animation(toolbar-before 0.1s ease 3.4s 1 normal forwards);
        }

        #toolbar-after {
            .animation(toolbar-after 0.1s ease 3.4s 1 normal forwards);
        }

        #toolbar-print {
            .animation(toolbar-print 0.2s ease-in 3.8s 1 normal forwards);
        }

        @-webkit-keyframes panel-in {
            100% {
                opacity: 1;
                -webkit-transform: translateY(0);
                transform: translateY(0);
            }
        }
        @keyframes panel-in {
            100% {
                opacity: 1;
                -webkit-transform: translateY(0);
                transform: translateY(0);
            }
        }

        @-webkit-keyframes panel-footer-out {
            100% { opacity: 0; }
        }
        @keyframes panel-footer-out {
            100% { opacity: 0; }
        }

        @-webkit-keyframes panel-footer-on-in {
            10% {
                opacity: 1;
            }
            60% {
                opacity: 1;
                -webkit-transform: scale3d(1.1, 1.1, 0);
                transform: scale3d(1.1, 1.1, 0);
            }
            100% {
                opacity: 1;
            }
        }
        @keyframes panel-footer-on-in {
            10% {
                opacity: 1;
            }
            60% {
                opacity: 1;
                -webkit-transform: scale3d(1.1, 1.1, 0);
                transform: scale3d(1.1, 1.1, 0);
            }
            100% {
                opacity: 1;
            }
        }

        @-webkit-keyframes panel-slide-left {
            0% {
                -webkit-transform: translateY(0);
                transform: translateY(0);
            }
            100% {
                -webkit-transform: translate3d(-9px, 9px, 0);
                transform: translate3d(-9px, 9px, 0);
            }
        }
        @keyframes panel-slide-left {
            0% {
                -webkit-transform: translateY(0);
                transform: translateY(0);
            }
            100% {
                -webkit-transform: translate3d(-9px, 9px, 0);
                transform: translate3d(-9px, 9px, 0);
            }
        }

        @-webkit-keyframes panel-icon-empty-in1 {
            100% { opacity: 1; }
        }
        @keyframes panel-icon-empty-in1 {
            100% { opacity: 1; }
        }

        @-webkit-keyframes panel-footer-ok-in {
            100% { opacity: 1; }
        }
        @keyframes panel-footer-ok-in {
            100% { opacity: 1; }
        }

        @-webkit-keyframes panel-footer-on-out {
            100% { opacity: 0; }
        }
        @keyframes panel-footer-on-out {
            100% { opacity: 0; }
        }

        @-webkit-keyframes available-icons-in {
            100% { opacity: 1; }
        }
        @keyframes available-icons-in {
            100% { opacity: 1; }
        }

        @-webkit-keyframes panel-wrapper-in {
            50% {
                -webkit-transform: translate3d(-14px, 4px, 0);
                transform: translate3d(-14px, 4px, 0);
            }
            100% {
                background: #3382aa;
                -webkit-transform: translate3d(-14px, 4px, 0);
                transform: translate3d(-14px, 4px, 0);
            }
        }
        @keyframes panel-wrapper-in {
            50% {
                -webkit-transform: translate3d(-14px, 4px, 0);
                transform: translate3d(-14px, 4px, 0);
            }
            100% {
                background: #3382aa;
                -webkit-transform: translate3d(-14px, 4px, 0);
                transform: translate3d(-14px, 4px, 0);
            }
        }

        @-webkit-keyframes available-icon-history1 {
            99.9% {
                -webkit-transform: translate3d(353px, 145px, 0);
                transform: translate3d(353px, 145px, 0);
                opacity: 1;
            }
            100% {
                -webkit-transform: translate3d(353px, 145px, 0);
                transform: translate3d(353px, 145px, 0);
                opacity: 0;
            }
        }
        @keyframes available-icon-history1 {
            99.9% {
                -webkit-transform: translate3d(353px, 145px, 0);
                transform: translate3d(353px, 145px, 0);
                opacity: 1;
            }
            100% {
                -webkit-transform: translate3d(353px, 145px, 0);
                transform: translate3d(353px, 145px, 0);
                opacity: 0;
            }
        }

        @-webkit-keyframes panel-icon-history-in {
            100% { opacity: 1; }
        }
        @keyframes panel-icon-history-in {
            100% { opacity: 1; }
        }

        @-webkit-keyframes available-left-group {
            100% {
                -webkit-transform: translateX(79px);
                transform: translateX(79px);
            }
        }
        @keyframes available-left-group {
            100% {
                -webkit-transform: translateX(79px);
                transform: translateX(79px);
            }
        }

        @-webkit-keyframes panel-icon-empty-out1 {
            100% { opacity: 0; }
        }
        @keyframes panel-icon-empty-out1 {
            100% { opacity: 0; }
        }

        @-webkit-keyframes panel-icon-print {
            80% {
                opacity: 0.7;
                -webkit-transform: translate3d(-25px, -161px, 0);
                transform: translate3d(-25px, -161px, 0);
            }
            90% {
                opacity: 0.7;
                -webkit-transform: translate3d(-25px, -161px, 0);
                transform: translate3d(-25px, -161px, 0);
            }
            100% {
                opacity: 0;
                -webkit-transform: translate3d(-25px, -161px, 0);
                transform: translate3d(-25px, -161px, 0);
            }
        }
        @keyframes panel-icon-print {
            80% {
                opacity: 0.7;
                -webkit-transform: translate3d(-25px, -161px, 0);
                transform: translate3d(-25px, -161px, 0);
            }
            90% {
                opacity: 0.7;
                -webkit-transform: translate3d(-25px, -161px, 0);
                transform: translate3d(-25px, -161px, 0);
            }
            100% {
                opacity: 0;
                -webkit-transform: translate3d(-25px, -161px, 0);
                transform: translate3d(-25px, -161px, 0);
            }
        }

        @-webkit-keyframes panel-icon-settings {
            100% {
                -webkit-transform: translateX(-87px);
                transform: translateX(-87px);
            }
        }
        @keyframes panel-icon-settings {
            100% {
                -webkit-transform: translateX(-87px);
                transform: translateX(-87px);
            }
        }

        @-webkit-keyframes panel-icon-fullscreen {
            100% {
                -webkit-transform: translateX(-87px);
                transform: translateX(-87px);
            }
        }
        @keyframes panel-icon-fullscreen {
            100% {
                -webkit-transform: translateX(-87px);
                transform: translateX(-87px);
            }
        }

        @-webkit-keyframes panel-icon-search {
            100% {
                -webkit-transform: translate3d(172px, -72px, 0);
                transform: translate3d(172px, -72px, 0);
            }
        }
        @keyframes panel-icon-search {
            100% {
                -webkit-transform: translate3d(172px, -72px, 0);
                transform: translate3d(172px, -72px, 0);
            }
        }

        @-webkit-keyframes panel-icon-addons {
            100% {
                -webkit-transform: translateX(-87px);
                transform: translateX(-87px);
            }
        }
        @keyframes panel-icon-addons {
            100% {
                -webkit-transform: translateX(-87px);
                transform: translateX(-87px);
            }
        }

        @-webkit-keyframes panel-icon-history-slide {
            100% {
                -webkit-transform: translateX(-85px);
                transform: translateX(-85px);
            }
        }
        @keyframes panel-icon-history-slide {
            100% {
                -webkit-transform: translateX(-85px);
                transform: translateX(-85px);
            }
        }

        @-webkit-keyframes panel-footer-ok-pulse {
            50% {
                -webkit-transform: scale3d(1.1, 1.1, 0);
                transform: scale3d(1.1, 1.1, 0);
            }
        }
        @keyframes panel-footer-ok-pulse {
            50% {
                -webkit-transform: scale3d(1.1, 1.1, 0);
                transform: scale3d(1.1, 1.1, 0);
            }
        }

        @-webkit-keyframes panel-icon-empty-in2 {
            100% { opacity: 1; }
        }
        @keyframes panel-icon-empty-in2 {
            100% { opacity: 1; }
        }

        @-webkit-keyframes panel-wrapper-out {
            0% {
                -webkit-transform: translate3d(-14px, 4px, 0);
                transform: translate3d(-14px, 4px, 0);
                background: #3382aa;
            }
            100% {
                background: none;
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
        }
        @keyframes panel-wrapper-out {
            0% {
                -webkit-transform: translate3d(-14px, 4px, 0);
                transform: translate3d(-14px, 4px, 0);
                background: #3382aa;
            }
            100% {
                background: none;
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
        }

        @-webkit-keyframes panel-slide-right {
            0% {
                -webkit-transform: translate3d(-9px, 9px, 0);
                transform: translate3d(-9px, 9px, 0);
            }
            100% {
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
        }
        @keyframes panel-slide-right {
            0% {
                -webkit-transform: translate3d(-9px, 9px, 0);
                transform: translate3d(-9px, 9px, 0);
            }
            100% {
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
        }

        @-webkit-keyframes panel-icon-empty-out2 {
            100% { opacity: 0; }
        }
        @keyframes panel-icon-empty-out2 {
            100% { opacity: 0; }
        }

        @-webkit-keyframes panel-footer-ok-out {
            100% { opacity: 0; }
        }
        @keyframes panel-footer-ok-out {
            100% { opacity: 0; }
        }

        @-webkit-keyframes panel-footer-in {
            100% { opacity: 1; }
        }
        @keyframes panel-footer-in {
            100% { opacity: 1; }
        }

        @-webkit-keyframes available-icons-out {
            100% { opacity: 0; }
        }
        @keyframes available-icons-out {
            100% { opacity: 0; }
        }

        @-webkit-keyframes flexible-replay {
            100% { opacity: 1; }
        }
        @keyframes flexible-replay {
            100% { opacity: 1; }
        }

        @-webkit-keyframes panel-replay {
            100% {
                -webkit-transform: rotateZ(720deg);
                transform: rotateZ(720deg);
            }
        }
        @keyframes panel-replay {
            100% {
                -webkit-transform: rotateZ(720deg);
                transform: rotateZ(720deg);
            }
        }

        #panel {
            @animations: panel-in 0.3s ease 0.6s 1 normal forwards,
                         panel-slide-left 0.3s ease 1.8s 1 normal forwards,
                         panel-slide-right 0.3s ease 5.3s 1 normal forwards;
            .animation(@animations);
        }

        #panel-footer {
            @animations: panel-footer-out 0.1s linear 1.3s 1 normal forwards,
                         panel-footer-in 0.1s linear 5.3s 1 normal forwards;
            .animation(@animations);
        }

        #panel-footer-on {
            @animations: panel-footer-on-in 0.3s ease 1.3s 1 normal forwards,
                         panel-footer-on-out 0.1s linear 2.1s 1 normal forwards;
            .animation(@animations);
        }

        #panel-icon-empty {
            @animations: panel-icon-empty-in1 0.1s ease 1.9s 1 normal forwards,
                         panel-icon-empty-out1 0.2s ease 3s 1 normal forwards,
                         panel-icon-empty-in2 0.2s ease 3.5s 1 normal forwards,
                         panel-icon-empty-out2 0.1s ease 5.3s 1 normal forwards;
            .animation(@animations);
        }

        #panel-footer-ok {
            @animations: panel-footer-ok-in 0.1s ease 1.9s 1 normal forwards,
                         panel-footer-ok-pulse 0.4s ease-in-out 4.5s 1 normal forwards,
                         panel-footer-ok-out 0.1s ease 5.3s 1 normal forwards;
            .animation(@animations);
        }

        #available-icons {
            @animations: available-icons-in 0.1s ease 1.9s 1 normal forwards,
                         available-icons-out 0.2s ease 5.3s 1 normal forwards;
            .animation(@animations);
        }

        #panel-wrapper {
            @animations: panel-wrapper-in 0.2s ease 1.9s 1 normal forwards,
                         panel-wrapper-out 0.2s ease 5.2s 1 normal forwards;
            .animation(@animations);
        }

        #available-icon-history {
            @animations: available-icon-history1 0.6s ease-in-out 2.4s 1 normal forwards;
            .animation(@animations);
        }

        #panel-icon-history {
            @animations: panel-icon-history-in 0.1s linear 2.9s 1 normal forwards,
                         panel-icon-history-slide 0.3s ease 3.4s 1 normal forwards;
            .animation(@animations);
        }

        #available-left-group {
            .animation(available-left-group 0.2s linear 2.5s 1 normal forwards);
        }

        #panel-icon-print {
            .animation(panel-icon-print 0.6s ease-in 3.3s 1 normal forwards);
        }

        #panel-icon-settings {
            .animation(panel-icon-settings 0.3s ease 3.4s 1 normal forwards);
        }

        #panel-icon-fullscreen {
            .animation(panel-icon-fullscreen 0.3s ease 3.4s 1 normal forwards);
        }

        #panel-icon-search {
            .animation(panel-icon-search 0.3s ease 3.4s 1 normal forwards);
        }

        #panel-icon-addons {
            .animation(panel-icon-addons 0.3s ease 3.4s 1 normal forwards);
        }

        #flexible-replay {
            .animation(flexible-replay 0.2s ease 5.4s 1 normal forwards);
        }

        #panel-replay {
            .animation(panel-replay 0.7s linear 6s 1 normal forwards);
        }
    }
}

@media (max-width: @breakDesktop) and (min-width: @breakTablet) {
    #customize {
        background-size: 716px 356px;

        .cta {
            left: 20px;
            bottom: 50px;
            width: 440px;
        }
    }

    .cssanimations {
        .fallback {
            display: block;
        }

        .stage {
            display: none;
        }
    }
}

@media (max-width: @breakTablet) {
    // set nav pointer
    #site-header-logo:after {
        display: none;
    }

    #intro {
        .container {
            min-height: 0;
        }

        h1 {
            .font-size(32px);
        }
    }

    #overview-intro-download-wrapper {
        // js displays the button for non fx browsers, so this needs to be
        // important to override the generated inline style
        display: none !important;
    }

    #customize {
        .animation-wrapper {
            .fallback {
                display: block;
            }

            .stage {
                display: none;
            }
        }

        .cta {
            position: relative;
            bottom: auto;
            left: auto;
            width: auto;
        }
    }
}
