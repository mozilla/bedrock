// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at https://mozilla.org/MPL/2.0/.
@use '../m24/vars/lib' as *;
@use './ads/vars' as advars;
@use '../../fonts/mozilla-sans-headline/mozilla-sans-headline.css';

$font-path: '/media/protocol/fonts';
$image-path: '/media/protocol/img';
@use './ads/mozilla-headline-light-font';
@use '~@mozilla-protocol/core/protocol/css/includes/lib';
@use '~@mozilla-protocol/core/protocol/css/templates/multi-column';
@use '../m24/base';

@use './ads/subnav';
@use './ads/main-dark-section';
@use './ads/home-brands';
@use './ads/home-solutions';
@use './ads/home-approach';
@use './ads/home-why-moz';
@use './ads/home-contact';
@use './ads/home-notification';
@use './ads/subpage-header';
@use './ads/principles';

.mzp-t-dark.mozads-t-dark {
    background-color: advars.$color-ads-off-black;
}

.has-scroll-padding {
    scroll-margin-top: 73px;
}

:root {
    --title-font-family: 'Mozilla Sans Headline', sans-serif;
}

#mozads-main {
    --sub-nav-height: 64px;
    margin-top: -6px; // prevents flash of body's bg color when scrolling up with a sticky navbar
    box-sizing: border-box;
    overflow: hidden;

    * {
        box-sizing: border-box;
    }

    p,
    figcaption {
        line-height: 1.2;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Mozilla Sans Headline', sans-serif;
        font-weight: 300;
    }

    hr {
        border-top-width: 1px;
    }

    .m24-c-content.no-top-padding {
        padding-top: 0;
    }

    .m24-c-content.no-bottom-padding {
        padding-bottom: 0;
    }

    .md-only {
        display: none;

        @media #{$mq-md} {
            display: block;
        }
    }
}

.mozads-hgroup {
    display: flex;
    flex-direction: column;
    gap: $spacing-md;
    margin-bottom: 0;
}

.mozads-eyebrow {
    @include text-title-2xs;
    font-family: var(--title-font-family);
    margin-bottom: 0;
    font-weight: 400;
}

.mozads-section-heading {
    font-weight: 300;
    /* stylelint-disable-next-line property-no-unknown */
    leading-trim: none;
    line-height: 100%;
    letter-spacing: -1%;
    margin: 0;
    font-family: var(--title-font-family);
    @include text-title-md;

    @media #{$mq-md} {
        @include text-title-2xl;
    }
}

.mozads-section-subheading {
    @include text-body-lg;
    margin: 0;

    @media #{$mq-md} {
        @include text-title-2xs;
    }
}

.mozads-figure {
    position: relative;
    z-index: 1;
}

.mozads-figure-grid {
    display: flex;
    flex-direction: column;
    gap: 3rem;

    .mozads-stat {
        position: relative;

        &::before {
            content: '';
            position: absolute;
            inset: 110% auto auto 1px;
            height: 100px;
            width: 1px;
            background-color: advars.$color-ads-off-black;
            z-index: 0;
        }
    }

    @media #{$mq-md} {
        display: grid;
        grid-template-columns: 1fr 2fr;
        grid-template-areas: 'stat figure';
        align-items: center;
        gap: $spacing-2xl;

        .mozads-figure {
            grid-area: figure;
        }

        .mozads-stat {
            grid-area: stat;
            justify-self: center;
            position: relative;
            align-items: end;
        }

        &.reversed-on-large {
            grid-template-columns: 2fr 1fr;
            grid-template-areas: 'figure stat';

            .mozads-stat {
                align-items: start;

                &::before {
                    inset: 46% 105% auto auto;
                }
            }
        }

        .mozads-stat::before {
            width: min(50vh, 600px);
            height: 1px;
            inset: 42% auto auto 105%;
        }
    }
}

.mozads-figcaption {
    margin-top: $spacing-sm;
    @include text-title-2xs;

    &.has-extra-pad {
        @media #{$mq-md} {
            padding-left: 4.8%;
        }
    }
}

.mozads-stat-group {
    display: flex;
    flex-flow: row wrap;
    align-items: center;
    justify-content: space-between;
    gap: $spacing-2xl;

    .mozads-stat-number {
        font-size: $text-title-2xl;
    }
}

.mozads-stat {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: $spacing-2xl;
}

.mozads-stat-icon {
    width: 64px;
    height: 64px;
}

.mozads-stat-text {
    display: flex;
    flex-direction: column;
}

.mozads-stat-number {
    font-size: var(--title-md-size);
    line-height: var(--title-md-line-height);
}

.mozads-stat-label {
    @include text-body-md;
}

.mozads-large-link {
    display: block;
    text-align: right;
    font-size: var(--title-xs-size);
    line-height: var(--title-xs-line-height);
    margin: 0;

    &.white {
        color: white;

        &:hover {
            color: white;
            text-decoration: underline;
        }
    }

    &.with-top-margin {
        margin-top: $spacer-xl;
    }
}

@media #{$mq-md} {
    .mozads-stat-group {
        .mozads-stat {
            max-width: 20%;
        }
    }

    .mozads-stat {
        flex-direction: column;
        gap: 0;
    }

    .mozads-stat-icon {
        width: 90px;
        height: 90px;
        margin-bottom: $spacing-lg;
    }

    .mozads-stat-number {
        font-size: var(--title-2xl-size);
        line-height: var(--title-2xl-line-height);
    }

    .mozads-large-link {
        font-size: var(--title-md-size);
        line-height: var(--title-md-line-height);
    }

    .mozads-highlight-text {
        font-size: $text-body-lg;
        max-width: 800px;
    }

    .mozads-gallery-tile-padding-top {
        padding-top: 200px;
    }
}

// Mozilla Ads callout component
.mozads-c-callout {
    text-align: center;
    font-weight: 300;
    background-color: advars.$color-ads-off-black;
    position: relative;

    > * {
        margin: 0 auto;
        padding: 0 $container-padding;
        max-width: $content-max;
        z-index: 1;
        position: relative;
    }

    h1 {
        font-size: $text-title-2xl;
        line-height: 0.9;
        color: white;
        font-weight: 300;
        letter-spacing: -2%;
        text-shadow:
            0 1px 1px rgba(0, 0, 0, 0.1),
            0 1px 2px rgba(0, 0, 0, 0.1),
            0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .mozads-c-callout-action,
    .mozads-c-callout-action:hover {
        color: white;
        font-weight: 300;
        font-size: $text-button-md;
    }

    .mozads-c-callout-section {
        height: 60vh;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        padding-block: 2rem;

        &.is-bottom {
            height: 70vh;
            justify-content: flex-start;
            padding-top: 4rem;
        }
    }

    .mozads-c-callout-card {
        font-weight: 300;
        font-size: 1.25rem;
        color: white;
        text-shadow:
            0 1px 1px rgba(0, 0, 0, 0.1),
            0 1px 2px rgba(0, 0, 0, 0.1),
            0 2px 4px rgba(0, 0, 0, 0.1);

        p {
            margin-bottom: $spacing-md;
        }

        a {
            font-size: $text-button-sm;
            color: white;
        }
    }

    .middle-mobile-images {
        position: relative;
        height: 50vh;
        margin-top: 2rem;

        img {
            position: absolute;

            &.image-4 {
                top: 0;
                right: 5%;
                max-width: 40%;
                z-index: 1;
            }

            &.image-5 {
                top: 39%;
                left: 15%;
                max-width: 22%;
            }

            &.image-6 {
                bottom: 0;
                left: 2%;
                max-width: 20%;
            }

            &.rectangle-h {
                top: 62%;
                right: -10%;
                max-width: 40%;
                z-index: 0;
            }
        }
    }

    .mozads-c-callout-bg {
        position: absolute;
        top: 0;
        height: 100%;
        width: 100%;
        left: 0;
        right: 0;
        z-index: 0;
        padding: 0 $container-padding;
        max-width: $content-max;

        .mobile-helper {
            display: contents;
        }

        img {
            position: absolute;

            &.large-only {
                display: none;
            }

            &.image-1 {
                top: 3%;
                left: 2%;
                max-width: 40%;
            }

            &.image-2 {
                top: 10%;
                right: 5%;
                max-width: 20%;
            }

            &.image-3 {
                top: 15%;
                right: -5%;
                max-width: 15%;
                z-index: -1;
            }

            &.image-7 {
                bottom: 2%;
                right: 2%;
                max-height: 12%;
            }

            &.rectangle-v {
                left: 2%;
                max-width: 10%;
                top: 40%;
            }
        }
    }

    // uncomment for dynamic scroll effect
    // .mozads-c-callout-bg {
    //     position: absolute;
    //     top: 0;
    //     height: 100%;
    //     width: 100%;
    //     max-width: 100%;
    //     z-index: 0;

    //     .mozads-c-callout-bg-inner {
    //         position: sticky;
    //         top: var(--sub-nav-height);
    //         height: 96vh;
    //     }

    //     .bg-image {
    //         position: absolute;
    //         display: grid;

    //         > * {
    //             grid-area: 1/1;
    //             margin: 0;
    //         }

    //         .layer-1 {
    //             z-index: 1;
    //         }

    //         .layer-2 {
    //             position: absolute;
    //             top: 0;
    //             right: 0;
    //             height: 50%;
    //             z-index: 2;
    //             mask:
    //                 linear-gradient(#000 0 0),
    //                 linear-gradient(#000 50%, #0000 0) content-box 0% 0% / 200%
    //                     200% no-repeat;
    //             -webkit-mask:
    //                 linear-gradient(#000 0 0),
    //                 linear-gradient(#000 50%, #0000 0) content-box 0% 0% / 200%
    //                     200% no-repeat;
    //             -webkit-mask-composite: xor;
    //             mask-composite: exclude;
    //             transition: 300ms ease-in;

    //             &.active {
    //                 mask-position:
    //                     0% 0%,
    //                     100% 100%;
    //                 -webkit-mask-position:
    //                     0% 0%,
    //                     100% 100%;
    //             }
    //         }

    //         .layer-3 {
    //             z-index: 3;
    //         }

    //         // desktop images
    //         &:nth-child(1) {
    //             top: 1vh;
    //             left: 0;
    //             max-width: 50%;
    //         }

    //         &:nth-child(2) {
    //             bottom: 2vh;
    //             right: 0;
    //             max-width: 50%;
    //         }

    //         &:nth-child(3) {
    //             bottom: 2vh;
    //             left: 12vh;
    //             max-width: 50%;
    //             display: none;
    //         }

    //         &:nth-child(4) {
    //             top: 1vh;
    //             right: 0;
    //             max-width: 50%;
    //             display: none;
    //         }

    //         --bg-image-height-width: 10vh;

    //         &:nth-child(5),
    //         &:nth-child(6) {
    //             .layer-2 {
    //                 height: var(--bg-image-height-width);
    //                 width: var(--bg-image-height-width);
    //             }
    //         }

    //         &:nth-child(5) {
    //             bottom: 2vh;
    //             left: 0;
    //             height: var(--bg-image-height-width);
    //             width: var(--bg-image-height-width);
    //         }

    //         &:nth-child(6) {
    //             top: 2vh;
    //             right: 18vh;
    //             height: var(--bg-image-height-width);
    //             width: var(--bg-image-height-width);
    //         }
    //     }
    // }
}

@media #{$mq-md} {
    .mozads-c-callout {
        .mozads-c-callout-section,
        .mozads-c-callout-section.is-bottom {
            height: 92vh;
            justify-content: center;
            align-items: center;
        }

        h1 {
            font-size: 8rem;
        }

        .mozads-c-callout-card {
            max-width: $content-md;
            font-size: 2rem;
        }

        .middle-mobile-images {
            display: none;
        }

        .mozads-c-callout-bg {
            img {
                &.large-only {
                    display: block;
                }

                &.image-1 {
                    top: 0;
                    left: 10%;
                    max-width: 15%;
                }

                &.image-2 {
                    top: 3%;
                    right: 5%;
                    max-width: 20%;
                }

                &.image-3 {
                    top: 12%;
                    right: -2%;
                    max-width: 15%;
                    z-index: -1;
                }

                &.image-4 {
                    top: 40%;
                    right: 5%;
                    max-width: 20%;
                }

                &.image-5 {
                    top: 52%;
                    left: 15%;
                    max-width: 20%;
                }

                &.image-6 {
                    top: 58%;
                    left: 2%;
                    max-width: 15%;
                }

                &.image-7 {
                    bottom: 2%;
                    right: 2%;
                    max-height: 15%;
                }

                &.rectangle-h {
                    top: 62%;
                    right: -10%;
                    max-width: 20%;
                }

                &.rectangle-v {
                    left: 2%;
                    max-width: 10%;
                    top: 20%;
                }
            }
        }
    }
}

.mozads-header {
    text-align: start;
    padding: $layout-md 0;

    .mzp-c-callout-desc {
        @include text-body-xl;
    }

    @media #{$mq-lg} {
        .mzp-c-callout-title {
            @include text-title-2xl;
        }

        .mzp-c-callout-desc {
            max-width: 60ch;
        }
    }
}

.mozads-footer {
    text-align: start;
}

.mozads-anonym .mzp-c-split-media-asset {
    margin: 0 auto;
}

.mozads-content-intro {
    @include text-body-xl;

    @media #{$mq-lg} {
        .ads-section-header & {
            max-width: 60ch;
        }
    }
}

.mozads-product {
    padding-bottom: $layout-md;

    .mzp-c-split-media-asset {
        border-radius: $border-radius-lg;
        margin: 0 auto;
    }
}

.mozads-valueprops {
    .mzp-c-picto-body p {
        margin: 0;
    }
}

.mozads-product-audience {
    background: $color-light-gray-20;
    border-radius: $border-radius-lg;
    padding: $spacing-lg $spacing-md;
    margin-top: $spacing-md;
    text-align: start;

    & > p:last-child {
        margin-bottom: 0;
    }

    @media #{$mq-lg} {
        @include text-body-sm;
        display: flex;
        text-align: center;
        padding: 0;

        & > p {
            border-right: 1px solid $color-light-gray-40;
            flex: 1 1 0;
            margin: 0;
            padding: $spacing-lg $spacing-md;

            &:last-child {
                border: 0;
            }
        }

        strong {
            @include font-mozilla-headline;
            @include text-title-md;
            display: block;
            margin-bottom: $spacing-sm;
        }
    }
}

@media #{$mq-xl} {
    .mozads-principles.mzp-t-picto-side {
        .mzp-c-picto {
            padding-left: $layout-2xl;
        }

        .mzp-c-picto-image {
            width: 135px;
        }
    }
}
