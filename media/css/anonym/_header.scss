// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at https://mozilla.org/MPL/2.0/.

@use '../m24/vars/lib' as *;

// Anonym header styles applied to existing M24 navigation markup.
// Scope to `.anonym` so we don't accidentally restyle other M24 pages.
.anonym {
    .m24-navigation-refresh {
        background: #fafafa;
        border-bottom: none;
        color: #161616;
        height: 56px;

        @media #{$mq-md} {
            height: 75px;
        }
    }

    html.mzp-has-sticky-navigation & {
        .m24-navigation-refresh.m24-mzp-is-sticky.mzp-is-scrolling {
            box-shadow: none;
            border-bottom: 1px solid #D4D4D4;
        }
    }

    .m24-c-navigation-l-content {
        height: 100%;
        width: 100%;
        padding: 0;
    }

    .m24-c-navigation-container {
        align-items: center;
        display: flex;
        height: 100%;
        justify-content: space-between;
        margin: 0 auto;
        max-width: 1440px;
        padding: 0 16px;
        width: 100%;
        column-gap: 16px;

        @media #{$mq-md} {
            padding: 0 32px;
            column-gap: 22px;
        }
    }

    // Logo link (contains the inline SVG wordmark)
    .m24-c-navigation-logo-link {
        align-items: center;
        display: inline-flex;
        order: 1;
        text-decoration: none;

        svg {
            display: block;
            height: 17px;
            width: auto;

            @media #{$mq-md} {
                height: 23.771px;
                width: 144.206px;
            }
        }
    }

    // Wrap containing the list
    .m24-c-navigation-items {
        display: flex;
        flex: 1 1 auto;
        justify-content: flex-end;
        order: 2;
    }

    .m24-c-navigation-menu {
        display: flex;
        width: 100%;
    }

    .m24-c-menu {
        display: flex;
        justify-content: flex-end;
        width: 100%;
    }

    // Desktop nav list
    .m24-c-menu-category-list {
        align-items: center;
        display: flex;
        gap: 16px;
        list-style: none;
        margin: 0;
        padding: 0;

        @media #{$mq-md} {
            gap: 22px;
        }
    }

    .m24-c-menu-category-list a {
        color: #161616;
        font-family: 'Mozilla Text', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 14px;
        line-height: 1.5;
        text-decoration: none;
        white-space: nowrap;

        &:hover {
            text-decoration: underline;
        }
    }

    // "Contact" style (driven by NavigationLinkBlock.has_button_appearance)
    .m24-c-menu-category-list a.mzan-c-contact-button {
        align-items: center;
        background: #161616;
        border-radius: 0;
        color: #fafafa;
        display: inline-flex;
        font-weight: 600;
        height: 20px;
        padding: 5px 8px;
        text-decoration: none;

        &:hover {
            text-decoration: none;
        }

        @media #{$mq-md} {
            padding: 5px 10px;
            height: 28px;
        }
    }

    .m24-c-navigation-menu-button {
        align-items: center;
        background: #161616;
        border: 0;
        border-radius: 0;
        color: transparent;
        cursor: pointer;
        display: inline-flex;
        font-family: 'Mozilla Text', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        order: 3;
        padding: 0;
        position: relative;
        height: 28px;
        width: 28px;
        overflow: hidden;
        text-indent: -9999px;
        white-space: nowrap;
        margin: 0;

        &::before,
        &::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 2px;
            background-color: #fafafa;
            transform: translate(-50%, -50%);
            border-radius: 1px;
        }

        &::before {
            box-shadow: 0 -5px 0 0 #fafafa, 0 5px 0 0 #fafafa;
        }

        &::after {
            opacity: 0;
        }

        &.mzp-is-active {
            &::before {
                box-shadow: none;
                transform: translate(-50%, -50%) rotate(45deg);
                background-color: #161616;
            }

            &::after {
                opacity: 1;
                transform: translate(-50%, -50%) rotate(-45deg);
                background-color: #161616;
            }
        }

        @media #{$mq-md} {
            display: none;
        }
    }

    @media (max-width: 767px) {
        .m24-c-navigation-items:not(.mzp-is-open) {
            display: flex;
            position: static;
            width: auto;

            .m24-c-menu-category-list li {
                display: none;
            }

            .m24-c-menu-category-list li:nth-last-child(-n + 1) {
                display: list-item;
            }
        }

        html.js & {
            .m24-c-navigation-menu-button.mzp-is-active {
                background: transparent;
                width: 28px;
            }

            .m24-c-navigation-menu-button.mzp-is-active::after {
                content: '';
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) {
                height: 100vh;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-l-content,
            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-container {
                height: 100%;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-container {
                display: grid;
                grid-template-columns: 1fr auto;
                grid-template-rows: 56px 1fr;
                align-items: center;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-logo-link {
                grid-column: 1;
                grid-row: 1;
                justify-self: start;
                z-index: 2;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-menu-button {
                grid-column: 2;
                grid-row: 1;
                justify-self: end;
                z-index: 2;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-items {
                grid-column: 1 / -1;
                grid-row: 1 / -1;
                z-index: 1;
                height: 100%;
                width: 100%;
                animation: none;
                transform: none;
                background: #fafafa;
                position: static;
                inset: auto;
                top: auto;
                right: auto;
                margin-top: 0;
                overflow: auto;
                display: block;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-navigation-menu,
            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-menu {
                height: 100%;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-menu-category-list {
                display: grid;
                grid-template-columns: 1fr auto auto;
                grid-template-rows: 56px;
                grid-auto-rows: min-content;
                gap: 20px 16px;
                place-items: center;
                align-content: flex-start;
                list-style: none;
                margin: 0;
                padding: 0 44px 32px 0;
                width: 100%;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-menu-category-list li:nth-last-child(1) {
                grid-row: 1;
                grid-column: 3;
                justify-self: end;
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-menu-category-list li:not(:nth-last-child(-n + 1)) {
                grid-column: 1 / -1;
                justify-self: center;
                width: min(360px, 100%);
            }

            .m24-navigation-refresh:has(.m24-c-navigation-items.mzp-is-open) .m24-c-menu-category-list li:not(:nth-last-child(-n + 1)) a {
                align-items: center;
                display: flex;
                justify-content: left;
                font-size: 18px;
                line-height: 1.4;
                min-height: 44px;
                width: 100%;
                text-align: center;
            }
        }
    }
}
