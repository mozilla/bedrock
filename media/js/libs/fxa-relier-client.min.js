!function(t,n){"function"==typeof define&&define.amd?define([],n):t.FxaRelierClient=n()}(this,function(){var t,n,e;return function(r){function i(t,n){return g.call(t,n)}function o(t,n){var e,r,i,o,u,c,a,l,s,f,p,h=n&&n.split("/"),d=m.map,_=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(n){for(h=h.slice(0,h.length-1),t=t.split("/"),u=t.length-1,m.nodeIdCompat&&x.test(t[u])&&(t[u]=t[u].replace(x,"")),t=h.concat(t),s=0;s<t.length;s+=1)if(p=t[s],"."===p)t.splice(s,1),s-=1;else if(".."===p){if(1===s&&(".."===t[2]||".."===t[0]))break;s>0&&(t.splice(s-1,2),s-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||_)&&d){for(e=t.split("/"),s=e.length;s>0;s-=1){if(r=e.slice(0,s).join("/"),h)for(f=h.length;f>0;f-=1)if(i=d[h.slice(0,f).join("/")],i&&(i=i[r])){o=i,c=s;break}if(o)break;!a&&_&&_[r]&&(a=_[r],l=s)}!o&&a&&(o=a,c=l),o&&(e.splice(0,c,o),t=e.join("/"))}return t}function u(t,n){return function(){var e=y.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),h.apply(r,e.concat([t,n]))}}function c(t){return function(n){return o(n,t)}}function a(t){return function(n){v[t]=n}}function l(t){if(i(w,t)){var n=w[t];delete w[t],b[t]=!0,p.apply(r,n)}if(!i(v,t)&&!i(b,t))throw new Error("No "+t);return v[t]}function s(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function f(t){return function(){return m&&m.config&&m.config[t]||{}}}var p,h,d,_,v={},w={},m={},b={},g=Object.prototype.hasOwnProperty,y=[].slice,x=/\.js$/;d=function(t,n){var e,r=s(t),i=r[0];return t=r[1],i&&(i=o(i,n),e=l(i)),i?t=e&&e.normalize?e.normalize(t,c(n)):o(t,n):(t=o(t,n),r=s(t),i=r[0],t=r[1],i&&(e=l(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:e}},_={require:function(t){return u(t)},exports:function(t){var n=v[t];return"undefined"!=typeof n?n:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:f(t)}}},p=function(t,n,e,o){var c,s,f,p,h,m,g=[],y=typeof e;if(o=o||t,"undefined"===y||"function"===y){for(n=!n.length&&e.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(p=d(n[h],o),s=p.f,"require"===s)g[h]=_.require(t);else if("exports"===s)g[h]=_.exports(t),m=!0;else if("module"===s)c=g[h]=_.module(t);else if(i(v,s)||i(w,s)||i(b,s))g[h]=l(s);else{if(!p.p)throw new Error(t+" missing "+s);p.p.load(p.n,u(o,!0),a(s),{}),g[h]=v[s]}f=e?e.apply(v[t],g):void 0,t&&(c&&c.exports!==r&&c.exports!==v[t]?v[t]=c.exports:f===r&&m||(v[t]=f))}else t&&(v[t]=e)},t=n=h=function(t,n,e,i,o){if("string"==typeof t)return _[t]?_[t](n):l(d(t,n).f);if(!t.splice){if(m=t,m.deps&&h(m.deps,m.callback),!n)return;n.splice?(t=n,n=e,e=null):t=r}return n=n||function(){},"function"==typeof e&&(e=i,i=o),i?p(r,t,n,e):setTimeout(function(){p(r,t,n,e)},4),h},h.config=function(t){return h(t)},t._defined=v,e=function(t,n,e){n.splice||(e=n,n=[]),i(v,t)||i(w,t)||(w[t]=[t,n,e])},e.amd={jQuery:!0}}(),e("components/almond/almond",function(){}),function(t){"undefined"!=typeof module&&module&&module.exports?module.exports=t():"function"==typeof e&&e.amd?e("p-promise",t):P=t()}(function(){function t(t){if(!t.stack)try{throw t}catch(n){}return t}function e(){var t=J(new Error).stack;if(!t)return null;var n=[o(t,1)];return $&&(n=n.concat($),128===n.length&&n.pop()),n}function r(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t)||/at ([^ ]+):(\d+):(?:\d+)$/.exec(t)||/@(.+):(\d+):(?:\d+)$/.exec(t);return n?{fileName:n[1],lineNumber:Number(n[2])}:null}function i(){var t=J(new Error).stack;if(!t)return 0;var n=t.split("\n"),e=n[0].indexOf("@")>0?n[1]:n[2],i=r(e);return i?(z=i.fileName,i.lineNumber):0}function o(t,n){for(var e=t.split("\n"),r=[],i=0|n,o=e.length;o>i;++i){var a=e[i];!a||u(a)||c(a)||r.push(a)}return r.join("\n")}function u(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function c(t){var n=r(t);return!!n&&n.fileName===z&&n.lineNumber>=Q&&n.lineNumber<=mn}function a(t){if(t instanceof Error){var n=t.stack;if(n){if(~n.indexOf(Y))return}else n=J(t).stack;n&&(t.stack=[o(n,0)].concat($||[]).join(Y))}}function l(){this.a=null,this.b=null,this.next=null}function s(t){return"object"===t||"function"===t}function f(){if(cn.length)throw cn.shift()}function p(){for(;nn!==en;){var t=nn=nn.next;on>=1024?en.next=en.next.next:++on;var n=t.a,e=t.b;t.a=null,t.b=null,A(n,e)}rn=!1,$=null}function h(t,n){var e=en.next;e===nn?(en.next=e=new l,e.next=nn):--on,en=e,e.a=t,e.b=n,rn||(rn=!0,un())}function d(){var t=process.domain;t&&(B||(B=n("domain")),B.active=process.domain=null),rn&&Z?setImmediate(p):process.nextTick(p),t&&(B.active=process.domain=t)}function _(t){var n=1,e=document.createTextNode(""),r=new tn(t);return r.observe(e,{characterData:!0}),function(){n=-n,e.data=n}}function v(t){return function(){function n(){clearTimeout(e),clearInterval(r),t()}var e=setTimeout(n,0),r=setInterval(n,50)}}function w(t){if(!b.onerror)throw t;b.onerror(t)}function m(t){t._state===hn&&(t._domain&&t._domain.enter(),K(t._value))}function b(t){return t instanceof F?t:T(new F,t)}function g(t,n){t._state||(t._state=pn,t._value=n,I(t))}function y(t,n){t._state||($&&a(n),t._state=hn,t._value=n,V&&(t._domain=process.domain),I(t))}function x(t,n){n._state||(n._state=t._state,n._value=t._value,n._domain=t._domain,I(n))}function T(t,n){if(t._state)return t;if(n instanceof F)E(t,n);else{var e=typeof n;"object"===e&&null!==n||"function"===e?j(t,n):g(t,n)}return t}function E(t,n){n===t?y(t,new TypeError("You can't resolve a promise with itself")):n._state?x(n,t):H(n,_n,t)}function j(t,n){var e=k(t,n);"function"==typeof e?O(C(t,!1),e,n):g(t,n)}function k(t,n){try{return n.then}catch(e){return y(t,e),null}}function O(t,n,e){try{ln.call(n,e,t.resolve,t.reject)}catch(r){t.reject(r)}}function I(t){t._pending&&(S(t,t._op,t._pending),t._pending=null)}function S(t,n,e){if(n>=0)e(t,n);else if(n===_n)h(t,e);else for(var r=0,i=e.length;i>r;r+=2)S(t,e[r],e[r+1])}function H(t,n,e){t._state?S(t,n,e):t._pending?t._op===vn?t._pending.push(n,e):(t._pending=[t._op,t._pending,n,e],t._op=vn):(t._pending=e,t._op=n)}function A(t,n){var e=t._domain||n._domain;$=n._trace;var r=t._state===pn?n._cb:n._eb;n._cb=null,n._eb=null,n._domain=null,n._trace=null,null===r?x(t,n):e?e._disposed||(e.enter(),N(n,r,t._value),e.exit()):N(n,r,t._value)}function N(t,n,e){var r;try{r=n(e)}catch(i){return void y(t,i)}T(t,r)}function C(t,n){function r(e,r){if(t){var o=t;t=null,i&&($?i=null:$=i),e?y(o,n?e:r):T(o,r),i&&($=i=null)}}var i=b.longStackSupport?e():null;return n?r:{promise:t,resolve:function(t){r(!1,t)},reject:function(t){r(!0,t)}}}function q(){return C(new F,!1)}function U(t){var n=new F;return y(n,t),n}function F(){this._state=0,this._value=void 0,this._domain=null,this._cb=null,this._eb=null,this._op=0,this._pending=null,this._trace=null}function R(t){var n=L(t);return n._state?n:n._clone()}function L(t){function n(t,n){i[n]=t.inspect(),0===--o&&g(e,i)}var e=new F,r=t.length;if("number"!=typeof r)return y(e,new TypeError("input not array-like")),e;for(var i=new Array(r),o=r,u=0;r>u;++u)H(b(t[u]),u,n);return 0===o&&g(e,i),e}function M(t){var n=W(t);return n._state?n:n._clone()}function W(t){function n(t,n){null!==o&&(t._state===hn?(o=null,x(t,e),e=null):(o[n]=t._value,0===--u&&g(e,o)))}var e=new F,r=t.length,i=e;if("number"!=typeof r)return y(e,new TypeError("input not array-like")),e;for(var o=new Array(r),u=r,c=0;r>c;++c)H(b(t[c]),c,n);return 0===u&&g(e,o),i}function D(t,n,e){return W(t).then(function(t){return sn.call(n,void 0,t)},e)}function P(t){function n(n){return ln.apply(t,n)}return function(){var t=arguments.length,e=new Array(t+1);e[0]=this;for(var r=0;t>r;++r)e[r+1]=arguments[r];return W(e).then(n)}}function G(t){return function(){var n=new F,e=arguments.length,r=new Array(e+1);for(r[e]=C(n,!0);e--;)r[e]=arguments[e];return X(n,t,this,r),n}}function X(t,n,e,r){try{sn.call(n,e,r)}catch(i){y(t,i)}}var z,J=t,Q=i(),$=null;(new Error).stack&&(J=function(t){return t});var K,B,Y="\nFrom previous event:\n",V=s(typeof process)&&null!=process&&"[object process]"==={}.toString.call(process),Z="function"==typeof setImmediate,tn=s(typeof MutationObserver)&&MutationObserver||s(typeof WebKitMutationObserver)&&WebKitMutationObserver,nn=new l,en=nn,rn=!1,on=0,un=V?d:tn?_(p):v(p),cn=[],an=v(f),ln=s.call,sn=s.apply;en.next=nn,K=V?function(t){throw $=null,un(),t}:function(t){cn.push(t),an()};var fn=0,pn=1,hn=2,dn=0,_n=-1,vn=-2,wn=b(void 0);b.longStackSupport=!1,b.defer=q,b.reject=U,F.prototype._clone=function(){var t=new F;return E(t,this),t},F.prototype.then=function(t,n){var r=new F;return r._cb="function"==typeof t?t:null,r._eb="function"==typeof n?n:null,b.longStackSupport&&(r._trace=e()),V&&(r._domain=process.domain),this._state?h(this,r):H(this,_n,r),r},F.prototype.done=function(t,n){var e=this;(t||n)&&(e=e.then(t,n)),e=e.then(null,w),H(e,dn,m)},F.prototype.fail=function(t){return this.then(null,t)},F.prototype.fin=function(t){function n(){return b(t()).then(function(){x(e,r)})}var e=this,r=e.then(n,n);return r},F.prototype.spread=function(t,n){return this.then(W).then(function(n){return sn.call(t,void 0,n)},n)},F.prototype.timeout=function(t,n){var r=this._clone();if(this._state===fn){var i=b.longStackSupport?e():null,o=setTimeout(function(){$=i,y(r,new Error(n||"Timed out after "+t+" ms")),$=null},t);H(this,dn,function(){clearTimeout(o)})}return r},F.prototype.delay=function(t){var n=new F;return H(this,dn,function(e){e._state===pn?setTimeout(function(){x(e,n)},t):wn.then(function(){x(e,n)})}),n},F.prototype.all=function(){return this.then(W)},F.prototype.allSettled=function(){return this.then(L)},F.prototype.inspect=function(){switch(this._state){case fn:return{state:"pending"};case pn:return{state:"fulfilled",value:this._value};case hn:return{state:"rejected",reason:this._value};default:throw new TypeError("invalid state")}},F.prototype.nodeify=function(t){return t?void this.done(function(n){t(null,n)},t):this},b.allSettled=R,b.all=M,b.spread=D,b.promised=P,b.denodeify=G,b.onerror=null,b.nextTick=function(t){var n=wn.then(function(){t.call()});H(n,dn,m)};var mn=i();return b}),e("client/lib/function",[],function(){function t(t){var n=[].slice.call(arguments,1);return function(){return t.apply(this,n.concat([].slice.call(arguments,0)))}}return{partial:t}}),e("client/lib/object",[],function(){function t(t){for(var n,e=[].slice.call(arguments,1),r=0;n=e[r];++r)for(var i in n)t[i]=n[i];return t}return{extend:t}}),e("client/lib/options",[],function(){function t(t,n){for(var e,r=0;e=t[r];++r)if(!(e in n))throw new Error(e+" is required")}return{checkRequired:t}}),e("client/lib/constants",[],function(){return{DEFAULT_CONTENT_HOST:"https://accounts.firefox.com",DEFAULT_OAUTH_HOST:"https://oauth.accounts.firefox.com/v1",DEFAULT_PROFILE_HOST:"https://profile.accounts.firefox.com/v1",SIGNIN_ACTION:"signin",SIGNUP_ACTION:"signup",FORCE_AUTH_ACTION:"force_auth"}}),e("client/lib/url",[],function(){function t(t,n){return encodeURIComponent(t)+"="+encodeURIComponent(n)}function n(n){var e=[];for(var r in n)e.push(t(r,n[r]));return"?"+e.join("&")}return{createQueryParam:t,objectToQueryString:n}}),e("client/auth/base/api",["p-promise","client/lib/constants","client/lib/options","client/lib/function","client/lib/url"],function(t,n,e,r,i){function o(t,e){if(!t)throw new Error("clientId is required");this._clientId=t,this._oauthHost=e.oauthHost||n.DEFAULT_OAUTH_HOST,this._window=e.window||window}function u(n,r){var i=this;return r=r||{},t().then(function(){var t=["scope","state","redirectUri"];e.checkRequired(t,r);var o=c.call(i,n,r);return i.openFxa(o,r)})}function c(t,n){var e={action:t,client_id:this._clientId,state:n.state,scope:n.scope,redirect_uri:n.redirectUri};return n.email&&(e.email=n.email),this._oauthHost+"/authorization"+i.objectToQueryString(e)}var a=r.partial;return o.prototype={openFxa:function(){throw new Error("openFxa must be overridden")},signIn:a(u,n.SIGNIN_ACTION),forceAuth:function(r){var i=this;return t().then(function(){r=r||{};var t=["email"];return e.checkRequired(t,r),u.call(i,n.FORCE_AUTH_ACTION,r)})},signUp:a(u,n.SIGNUP_ACTION)},o}),e("client/auth/lightbox/lightbox",[],function(){function t(t,n,e){var r=t.document.createElement(n);for(var i in e)r.setAttribute(i,e[i]);return r}function n(t){var n="";for(var e in t)n+=e+":"+t[e]+";";return n}function e(t){t=t||{},this._window=t.window}return e.prototype={load:function(e,r){r=r||{};var i=r.background||"rgba(0,0,0,0.5)",o=r.zIndex||100;this._keepOverlay=r.keepOverlay;var u=this._backgroundEl=t(this._window,"div",{id:"fxa-background",style:n({background:i,bottom:0,left:0,position:"fixed",right:0,top:0,"z-index":o})}),c=t(this._window,"iframe",{id:"fxa",src:e,width:"600",height:"400",allowtransparency:"true",border:"0",style:n({background:"transparent",border:"none",display:"block",height:"600px",margin:"0 auto 0 auto",position:"relative",top:"10%",width:"400px"})});u.appendChild(c),this._window.document.body.appendChild(u),this._iframe=c,this._contentWindow=c.contentWindow},getContentElement:function(){return this._iframe},getContentWindow:function(){return this._contentWindow},isLoaded:function(){return!!this._backgroundEl},unload:function(){this._backgroundEl&&!this._keepOverlay&&(this._window.document.body.removeChild(this._backgroundEl),delete this._backgroundEl,delete this._iframe)}},e}),e("client/auth/lightbox/iframe_channel",["p-promise","client/lib/object"],function(t,n){function e(t){t=t||{},this._window=t.window,this._contentWindow=t.contentWindow,this._iframeHost=t.iframeHost}function r(t){if(t.origin===this._iframeHost){var n=i(t.data),e=n.command,r=n.data,o=u[e]||u.ignore;o.call(this,e,r)}}function i(t){var n=t.split("!!!");return{command:n[0],data:JSON.parse(n[1]||"{}")}}function o(t,n){return t+"!!!"+JSON.stringify(n||"")}e.prototype={version:"0.0.0",attach:function(){return this._boundOnMessage=r.bind(this),this._window.addEventListener("message",this._boundOnMessage,!1),this._deferred=t.defer(),this._deferred.promise},detach:function(){this._window.removeEventListener("message",this._boundOnMessage,!1)},send:function(t,e){var r=n.extend({version:this.version},e),i=o(t,r);this._contentWindow.postMessage(i,this._iframeHost)}};var u={error:function(t,n){this.detach(),this._deferred.reject(n)},ping:function(t,n){this.send(t,n)},ignore:function(t){console.log("ignoring command: %s",t)},oauth_cancel:function(){return this.detach(),this._deferred.reject({reason:"cancel"})},oauth_complete:function(t,n){this.detach(),this._deferred.resolve(n)}};return e.stringifyFxAEvent=o,e.parseFxAEvent=i,e}),e("client/auth/lightbox/api",["p-promise","client/lib/object","client/lib/options","client/lib/constants","../base/api","./lightbox","./iframe_channel"],function(t,n,e,r,i,o,u){function c(){var t=this;return t._lightbox?t._lightbox:(t._lightbox=new o({window:t._window}),t._lightbox)}function a(n,e){var r=this;return t().then(function(){if(r._lightbox&&r._lightbox.isLoaded())throw new Error("lightbox already open");var t=c.call(r);return t.load(n,e),t})}function l(t){var n=this;return n._channel?n._channel:(n._channel=new u({iframeHost:n._contentHost,contentWindow:t.getContentWindow(),window:n._window}),n._channel)}function s(n){var e=this;return t().then(function(){var t=l.call(e,n);return t.attach()})}function f(t,n){n=n||{},i.call(this,t,n),this._lightbox=n.lightbox,this._channel=n.channel,this._contentHost=n.contentHost||r.DEFAULT_CONTENT_HOST}return f.prototype=Object.create(i.prototype),n.extend(f.prototype,{openFxa:function(t,n){var e=this;return a.call(e,t,n).then(function(t){return s.call(e,t)}).then(function(t){return e.unload(),t},function(t){throw e.unload(),t})},unload:function(){var n=this;return t().then(function(){if(!n._lightbox)throw new Error("lightbox not open");n._lightbox.unload(),n._channel.detach()})}}),f}),e("client/auth/redirect/api",["../base/api","client/lib/constants","client/lib/options","client/lib/object"],function(t,n,e,r){function i(n,e){t.call(this,n,e)}return i.prototype=Object.create(t.prototype),r.extend(i.prototype,{openFxa:function(t){this._window.location.href=t}}),i}),e("client/auth/api",["p-promise","client/lib/function","client/auth/lightbox/api","client/auth/redirect/api"],function(t,n,e,r){function i(t,n,e,r){if(t._broker)throw new Error("Firefox Accounts is already open");if("object"==typeof n)t._broker=n;else{n=n||"default";var i=a[n];if(!i)throw new Error("Invalid ui: "+n);t._broker=new i(e,r)}return t._broker}function o(n,e){var r=this;return t().then(function(){e=e||{};var t=i(r,e.ui,r._clientId,r._options);return t[n](e).fin(function(){delete r._broker})})}function u(t,n){if(!t)throw new Error("clientId is required");this._clientId=t,this._options=n}var c=n.partial,a={"default":r,lightbox:e,redirect:r};return u.prototype={signIn:c(o,"signIn"),forceAuth:c(o,"forceAuth"),signUp:c(o,"signUp")},u}),function(t,n){"function"==typeof e&&e.amd?e("components/micrajax/micrajax",[],n):"object"==typeof exports?module.exports=n():t.Micrajax=n()}(this,function(){function t(t){var n=[].slice.call(arguments,1),e=function(){return t.apply(null,n.concat([].slice.call(arguments)))};return e}function n(t){return t.xhr?t.xhr:window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):void 0}function e(){}function r(t,n){try{4===t.readyState&&(t.onreadystatechange=e,n(t.responseText,t.status,t.statusText))}catch(r){}}function i(t){var n=[];for(var e in t){var r=t[e];if("undefined"!=typeof r){var i=encodeURIComponent(e)+"="+encodeURIComponent(r);n.push(i)}}return n.join("&")}function o(t,n){var e={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};for(var r in t)e[r]=t[r];for(var i in e)n.setRequestHeader(i,e[i])}function u(t,n,e){var r=i(e);return"GET"===n&&r&&(t+="?"+r),t}function c(t,n,e){var r;if("GET"!==n&&e)switch(t){case"application/json":r="string"==typeof e?e:JSON.stringify(e);break;case"application/x-www-form-urlencoded":r=i(e)}return r||null}function a(t,n){var e={"Content-type":t};for(var r in n)e[r]=n[r];return e}function l(i,l,f){i=i||{};var p=n(i);if(!p)throw new Error("could not get XHR object");p.onreadystatechange=t(r,p,l||e);var h=(i.type||"GET").toUpperCase(),d=i.contentType||s,_=u(i.url,h,i.data);f=c(d,h,i.data),p.open(h,_,!0);var v=a(d,i.headers);return o(v,p),p.send(f),p}var s="application/x-www-form-urlencoded",f={ajax:function(t){t=t||{};var n=t.error||e,r=t.success||e,i={readyState:0},o=l(t,function(t,e,o){if(i.status=e,i.responseText=t,i.statusText||(i.statusText=0!==e?o:"error"),i.readyState=4,e>=200&&300>e||304===e){var u=t;try{u=JSON.parse(t)}catch(c){}r(u,t,i)}else n(i,e,t)});return i.abort=function(){i.statusText="aborted",o.abort()},i}};return f}),e("client/lib/xhr",["p-promise","components/micrajax/micrajax","./function"],function(t,e,r){function i(t){return t?t:u?new u:void 0}function o(n,r,o,u){u=u||{};var c=t.defer();return e.ajax({type:n,url:r,data:o,contentType:u.contentType||"application/json",headers:u.headers,xhr:i(u.xhr),success:function(t){c.resolve(t)},error:function(t,n,e){c.reject(e)}}),c.promise}var u,c=r.partial;try{"undefined"!=typeof n&&(u=n("xhr2"))}catch(a){u=null}var l={get:c(o,"GET"),post:c(o,"POST")};return l}),e("client/token/api",["p-promise","client/lib/constants","client/lib/xhr"],function(t,n,e){function r(t,e){if(!t)throw new Error("clientId is required");this._clientId=t,e=e||{},this._clientSecret=e.clientSecret,this._oauthHost=e.oauthHost||n.DEFAULT_OAUTH_HOST}return r.prototype={tradeCode:function(n,r){if(!this._clientSecret)return t.reject(new Error("clientSecret is required"));if(!n)return t.reject(new Error("code is required"));var i=this._oauthHost+"/token";return e.post(i,{client_id:this._clientId,client_secret:this._clientSecret,code:n},r)},verifyToken:function(n,r){if(!n)return t.reject(new Error("token is required"));var i=this._oauthHost+"/verify";return e.post(i,{token:n},r)},destroyToken:function(n,r){if(!this._clientSecret)return t.reject(new Error("clientSecret is required"));if(!n)return t.reject(new Error("token is required"));var i=this._oauthHost+"/destroy";return e.post(i,{client_secret:this._clientSecret,token:n},r)}},r}),e("client/profile/api",["p-promise","client/lib/constants","client/lib/xhr","client/lib/object"],function(t,n,e,r){function i(t,e){if(!t)throw new Error("clientId is required");this._clientId=t,e=e||{},this._profileHost=e.profileHost||n.DEFAULT_PROFILE_HOST}return i.prototype={fetch:function(t,n){if(!t)throw new Error("token is required");var i=r.extend({headers:{Authorization:"Bearer "+t}},n),o=this;return e.get(o._profileHost+"/profile",{},i).then(function(t){return o._profileData=t,t})},all:function(){return this._profileData}},i}),e("client/FxaRelierClient",["client/auth/api","client/token/api","client/profile/api"],function(t,n,e){function r(r,i){if(!r)throw new Error("clientId is required");this.auth=new t(r,i),this.token=new n(r,i),this.profile=new e(r,i)}return r.prototype={version:"0.0.0",auth:null},r}),t("client/FxaRelierClient")});
