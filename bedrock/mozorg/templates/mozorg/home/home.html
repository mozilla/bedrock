{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% from "macros-protocol.html" import hero, billboard, picto with context %}

{% extends "base-protocol-mozilla.html" %}

{% block gtm_page_id %}data-gtm-page-id="Homepage"{% endblock %}

{% block page_title %}{{ ftl('home-internet-for-people-not-profit') }}{% endblock %}
{% block page_desc %}{{ ftl('home-did-you-know-mozilla-the-maker') }}{% endblock %}

{% block body_class %}lang-{{ LANG }}{% endblock %}

{% block body_id %}home{% endblock %}

{% set referrals="?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=homepage" %}
{% set show_mr2_promo = switch('homepage-mr2-promo') and ftl_has_messages('home-mr2-promo-title', 'home-mr2-promo-cta') %}

{% block extra_meta %}
<!-- validates bing webmaster tools -->
<meta name="msvalidate.01" content="B7B177115A634927D608514DA17B2574">
<!-- YouTube Verification -->
<meta name="google-site-verification" content="U9a6gH32vLIykvntaDToj-ytYhlZ1AfAgVEKstixQIE">
{% endblock %}

{% set show_pocket_banner = switch('fundraising-banner-pocket') and ftl_has_messages('banner-pocket-title', 'banner-pocket-button') %}
{% set show_fundraising_banner = switch('fundraising-banner-eoy2021') and donate_params and ftl_has_messages('banner-fundraising-title', 'banner-fundraising-body') %}

{% block page_css %}
  {{ css_bundle('home') }}

  {% if show_pocket_banner %}
    {{ css_bundle('pocket-banner') }}
  {% elif show_fundraising_banner %}
    {{ css_bundle('fundraising-banner') }}
  {% elif show_firefox_app_store_banner %}
    {{ css_bundle('firefox-app-store-banner') }}
  {% endif %}

  {% if show_mr2_promo %}
    {{ css_bundle('home-mr2-promo') }}
  {% else %}
    {{ css_bundle('home-mr1-promo') }}
  {% endif %}
{% endblock %}

{% block page_banner %}
  {% if show_pocket_banner %}
    {% include 'includes/banners/pocket.html' %}
  {% elif show_fundraising_banner %}
    {% include 'includes/banners/fundraiser.html' %}
  {% elif show_firefox_app_store_banner %}
    {% include 'includes/banners/mobile/firefox-app-store.html' %}
  {% endif %}
{% endblock %}

{% block content %}
<main role="main">
  {% if show_mr2_promo %}
    {% include 'mozorg/home/includes/mr2-promo.html' %}
  {% elif ftl_has_messages('home-promo-title-lalo', 'home-promo-title-soraya', 'home-promo-title-gary', 'home-promo-title-ryan') %}
    {%- set promos = [
      'mozorg/home/includes/mr1-promo-lalo.html',
      'mozorg/home/includes/mr1-promo-soraya.html',
      'mozorg/home/includes/mr1-promo-gary.html',
      'mozorg/home/includes/mr1-promo-ryan.html'
    ] -%}

    {% include promos|random() %}
  {% else %}
    {% call hero(
    class='mzp-c-hero mzp-has-image',
    include_cta=True,
    image_url='img/home/laptop.png'
    ) %}

    <h2 class="c-primary-cta-logo"><img alt="Firefox" src="{{ static('protocol/img/logos/firefox/logo-word-hor.svg') }}" height="40" width="125"></h2>
    <h3 class="c-primary-cta-title">{{ ftl('home-fast-for-good') }}</h3>

    <p class="c-primary-cta-desc">
      {{ ftl('home-with-2x-the-speed-built-in') }}
    </p>

    {{ download_firefox_thanks(dom_id='download-primary', download_location='primary cta') }}
    {% endcall %}
  {% endif %}

  <div class="mzp-l-content mzp-t-mozilla">
    {{ billboard(
    title=ftl('home-we-make-the-internet-safer'),
    desc=ftl('home-mozilla-is-the-not-for-profit'),
    image_url='img/home/dino.svg'
    )}}

    <section class="c-column-container">
      <div class="c-column">
        <div class="c-column-content">
          <h2>{{ ftl('home-our-impact') }}</h2>
          <p>{{ ftl('home-when-you-use-firefox-you-help') }}</p>

          <ul class="mzp-u-list-styled">
            <li>
              <a class="mzp-c-cta-link" rel="external" href="https://blog.mozilla.org/blog/2017/08/08/mozilla-information-trust-initiative-building-movement-fight-misinformation-online/{{ referrals }}">{{ ftl('home-mozilla-information-trust-initiative') }}</a>
            </li>
            <li>
              <a class="mzp-c-cta-link" rel="external" href="https://learning.mozilla.org/blog/new-partnership-with-un-women-to-teach-key-digital-skills-to-women/{{ referrals }}">{{ ftl('home-empowering-women-online') }}</a>
            </li>
            <li>
              <a class="mzp-c-cta-link" rel="external" href="https://blog.mozilla.org/blog/2017/09/06/mozilla-washington-post-reinventing-online-comments/{{ referrals }}">{{ ftl('home-the-coral-project') }}</a>
            </li>
            <li>
              <a class="mzp-c-cta-link" rel="external" href="https://internethealthreport.org/{{ referrals }}">{{ ftl('home-read-our-internet-health-report') }}</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="c-column">
        <div class="c-column-content">
          <h2>{{ ftl('home-our-innovations') }}</h2>
          <p>
            {{ ftl('home-using-the-web-as-the-platform') }}
          </p>

          <ul class="mzp-u-list-styled">
            <li>
              <a class="mzp-c-cta-link" rel="external" href="https://voice.mozilla.org/{{ referrals }}">{{ ftl('home-common-voice') }}</a>
            </li>
            <li>
              <a class="mzp-c-cta-link" rel="external" href="https://vr.mozilla.org/{{ referrals }}">{{ ftl('home-virtual-reality-platform') }}</a>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <section class="externals">
      <ul class="mzp-l-content mzp-l-columns mzp-t-columns-three mzp-t-picto-center">
          {% call picto(
            image_url='img/home/extensions.png',
            image_width=100,
            include_highres_image=True,
            body=True,
            base_el='li'
          ) %}
            <a class="mzp-c-cta-link" rel="external" href="https://addons.mozilla.org/{{ referrals }}">
              <h2 class="mzp-c-picto-heading">{{ ftl('home-extensions') }}</h2>
            </a>
            <p>{{ ftl('home-personalize-firefox-with-your') }}</p>
          {% endcall %}

          {% call picto(
            image_url='img/home/careers.png',
            image_width=100,
            include_highres_image=True,
            body=True,
            base_el='li'
          ) %}
            <a class="mzp-c-cta-link" rel="external" href="https://careers.mozilla.org/{{ referrals }}">
              <h2 class="mzp-c-picto-heading">{{ ftl('home-careers') }}</h2>
            </a>
            <p>{{ ftl('home-learn-about-the-benefits-of') }}</p>
          {% endcall %}

          {% call picto(
            image_url='img/home/help.png',
            image_width=100,
            include_highres_image=True,
            body=True,
            base_el='li'
          ) %}
            <a class="mzp-c-cta-link" rel="external" href="https://support.mozilla.org/{{ referrals }}">
              <h2 class="mzp-c-picto-heading">{{ ftl('home-need-help') }}</h2>
            </a>
            <p>{{ ftl('home-get-answers-to-your-questions') }} </p>
          {% endcall %}
      </ul>
    </section>

    <aside class="mzp-c-newsletter">
      <div class="mzp-c-newsletter-image">
        {{ high_res_img('img/home/2018/newsletter-graphic.png', {'alt': ''}) }}
      </div>

      <div class="newsletter-content">
        {{ email_newsletter_form(
        newsletters='mozilla-and-you',
        button_class='button-dark',
        submit_text=ftl('newsletter-form-sign-up-now')
        )}}
      </div>
    </aside>
  </div>
</main>
{% endblock %}

{% block js %}
  {{ js_bundle('newsletter') }}

  {% if show_pocket_banner %}
    {{ js_bundle('pocket-banner') }}
  {% elif show_fundraising_banner %}
    {{ js_bundle('fundraising-banner') }}
  {% elif show_firefox_app_store_banner %}
    {{ js_bundle('firefox-app-store-banner') }}
  {% endif %}
{% endblock %}

{% block structured_data %}
  {% include 'includes/structured-data/organizations/mozilla-corporation-organisation.json' %}
{% endblock %}
