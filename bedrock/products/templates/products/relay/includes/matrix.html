{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% from "products/relay/includes/macros.html" import waitlist, toggle with context %}

{% set savings = relay_bundle_savings(country_code=country_code, lang=LANG) %}

<section>
  <table class="c-matrix-desktop">
    <thead>
      <tr>
        <th scope="col">{{ ftl('plan-matrix-heading-features') }}</th>
        <th scope="col">{{ ftl('plan-matrix-heading-plan-free') }}</th>
        <th scope="col">{{ ftl('plan-matrix-heading-plan-premium') }}</th>
        <th scope="col">{{ ftl('plan-matrix-heading-plan-phones') }}</th>
        <th scope="col" class="t-matrix-desktop-bundle"><strong>{{ ftl('plan-matrix-heading-plan-bundle-v2') }}</strong></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-email-masks') }}</th>
        <td>{{ relay_free_addresses() }}</td>
        <td>{{ ftl('plan-matrix-feature-count-unlimited') }}</td>
        <td>{{ ftl('plan-matrix-feature-count-unlimited') }}</td>
        <td>{{ ftl('plan-matrix-feature-count-unlimited') }}</td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-browser-extension') }}</th>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-email-tracker-removal') }}</th>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-promo-email-blocking') }}</th>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-email-subdomain') }}</th>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-email-reply') }}</th>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-phone-mask') }}</th>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
      <tr>
        <th scope="row">{{ ftl('plan-matrix-feature-mobile-mozvpn') }}</th>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-not.svg') }}" alt="{{ ftl('plan-matrix-feature-not-included') }}"></td>
        <td><img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <th scope="row">
          <div class="u-hidden">{{ ftl('plan-matrix-heading-price') }}</div>
        </th>
        <td>
          <div class="c-matrix-footer">
            <em class="c-matrix-footer-free">{{ ftl('plan-matrix-price-free') }}</em>
            {{ relay_fxa_button(
                entrypoint=_utm_source,
                button_text=ftl('plan-matrix-get-relay-cta'),
                class_name="mzp-c-button mzp-t-product mzp-t-lg",
                optional_parameters={
                  'utm_campaign': _utm_campaign
                },
                optional_attributes={
                  'data-cta-type': 'cta: fxa-relay',
                  'data-cta-text': 'Sign Up - relay-free',
                  'data-cta-position': 'matrix - table'
                }
            ) }}
          </div>
        </td>
        <td>
          <div class="c-matrix-footer">
            {% if email_available %}
              {{ toggle("table", "relay-email") }}
            {% else %}
              {{ waitlist("relay-email") }}
            {% endif %}
          </div>
        </td>
        <td>
          <div class="c-matrix-footer">
            {% if phone_available %}
              {{ toggle("table","relay-phone") }}
            {% else %}
              {{ waitlist("relay-phone") }}
            {% endif %}
          </div>
        </td>
        <td>
          <div class="c-matrix-footer">
            {% if bundle_available %}
              {% set vpn_monthly_price_yearly = relay_monthly_price(product='relay-bundle', plan='yearly', country_code=country_code, lang=LANG) %}
              <p class="c-matrix-footer-vpn-savings">{{ ftl('plan-matrix-price-vpn-discount-promo-v2', savings=savings) }}</p>
              <em class="c-matrix-footer-vpn-price">{{ ftl('plan-matrix-price-monthly-calculated', monthly_price=vpn_monthly_price_yearly) }}</em>
              <small class="c-matrix-footer-period">{{ ftl('plan-matrix-price-period-yearly-footnote-1') }}</small>
                {{ vpn_subscribe_link(
                  entrypoint=_utm_source,
                  link_text=ftl('plan-matrix-sign-up'),
                  plan='12-month',
                  class_name='mzp-c-button mzp-t-primary mzp-t-product mzp-t-lg',
                  country_code=country_code,
                  lang=LANG,
                  bundle_relay=True,
                  optional_parameters={
                    'utm_campaign': _utm_campaign
                  },
                  optional_attributes={
                    'data-cta-type': 'fxa-vpn',
                    'data-cta-text': 'Sign Up',
                    'data-cta-position': 'pricing'
                  }
                )}}
            {% else %}
              {{ waitlist("relay-bundle") }}
            {% endif %}
          </div>
        </td>
      </tr>
    </tfoot>
  </table>

  <div class="c-matrix-mobile">
    <ul>
      <li class="c-matrix-plan">
        <h3 class="mzp-u-title-xs">{{ ftl('plan-matrix-heading-plan-free') }}</h3>
        <ul class="c-matrix-features">
          <li>{{ ftl('plan-matrix-feature-mobile-email-masks') }} <span>5</span></li>
          <li>{{ ftl('plan-matrix-feature-mobile-browser-extension') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-tracker-removal') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
        </ul>
        <div class="c-matrix-footer">
            <em class="c-matrix-footer-free">{{ ftl('plan-matrix-price-free') }}</em>
            {{ relay_fxa_button(
              entrypoint=_utm_source,
              button_text=ftl('plan-matrix-get-relay-cta'),
              class_name="mzp-c-button mzp-t-product mzp-t-lg",
              optional_parameters={
                'utm_campaign': _utm_campaign
              },
              optional_attributes={
                'data-cta-type': 'cta: fxa-relay',
                'data-cta-text': 'Sign Up - relay-free',
                'data-cta-position': 'matrix - mobile'
              }
            )}}
        </div>
      </li>
      <li class="c-matrix-plan">
        <h3 class="mzp-u-title-xs">{{ ftl('plan-matrix-heading-plan-premium') }}</h3>
        <ul class="c-matrix-features">
          <li>{{ ftl('plan-matrix-feature-mobile-email-masks') }} <span>{{ ftl('plan-matrix-feature-count-unlimited') }}</span></li>
          <li>{{ ftl('plan-matrix-feature-mobile-browser-extension') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-tracker-removal') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-promo-email-blocking') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-subdomain') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-reply') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
        </ul>
        <div class="c-matrix-footer">
          {% if email_available %}
            {{ toggle("mobile","relay-email") }}
          {% else %}
            {{ waitlist("relay-email") }}
          {% endif %}
        </div>
      </li>
      <li class="c-matrix-plan">
        <h3 class="mzp-u-title-xs">{{ ftl('plan-matrix-heading-plan-phones') }}</h3>
        <ul class="c-matrix-features">
          <li>{{ ftl('plan-matrix-feature-mobile-email-masks') }} <span>{{ ftl('plan-matrix-feature-count-unlimited') }}</span></li>
          <li>{{ ftl('plan-matrix-feature-mobile-browser-extension') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-tracker-removal') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-promo-email-blocking') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-subdomain') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-reply') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-phone-mask') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
        </ul>
        <div class="c-matrix-footer">
          {% if phone_available %}
            {{ toggle("mobile","relay-phone") }}
          {% else %}
            {{ waitlist("relay-phone") }}
          {% endif %}
        </div>
      </li>
      <li class="c-matrix-plan t-matrix-mobile-bundle">
        <h3 class="mzp-u-title-xs">{{ ftl('plan-matrix-heading-plan-bundle-v2') }}</h3>
        <ul class="c-matrix-features">
          <li>{{ ftl('plan-matrix-feature-mobile-email-masks') }} <span>{{ ftl('plan-matrix-feature-count-unlimited') }}</span></li>
          <li>{{ ftl('plan-matrix-feature-mobile-browser-extension') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-tracker-removal') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-promo-email-blocking') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-subdomain') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-email-reply') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-phone-mask') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
          <li>{{ ftl('plan-matrix-feature-mobile-mozvpn') }} <img src="{{ static('img/products/relay/icon-check.svg') }}" alt="{{ ftl('plan-matrix-feature-included') }}" width="16"></li>
        </ul>
      <div class="c-matrix-footer">
        {% if bundle_available %}
          {% set vpn_monthly_price_yearly = relay_monthly_price(product='relay-bundle', plan='yearly', country_code=country_code, lang=LANG) %}
          <p class="c-matrix-footer-vpn-savings">{{ ftl('plan-matrix-price-vpn-discount-promo-v2', savings=savings) }}</p>
          <em class="c-matrix-footer-vpn-price">{{ ftl('plan-matrix-price-monthly-calculated', monthly_price=vpn_monthly_price_yearly) }}</em>
          <small class="c-matrix-footer-period">{{ ftl('plan-matrix-price-period-yearly-footnote-1') }}</small>
          {{ vpn_subscribe_link(
            entrypoint=_utm_source,
            link_text=ftl('plan-matrix-sign-up'),
            plan='12-month',
            class_name='mzp-c-button mzp-t-primary mzp-t-product mzp-t-lg',
            country_code=country_code,
            lang=LANG,
            bundle_relay=True,
            optional_parameters={
              'utm_campaign': _utm_campaign
            },
            optional_attributes={
              'data-cta-type': 'fxa-vpn',
              'data-cta-text': 'Sign Up',
              'data-cta-position': 'pricing'
            }
          )}}
        {% else %}
          {{ waitlist("relay-bundle") }}
        {% endif %}
      </div>
      </li>
    </ul>
  </div>

</section>
