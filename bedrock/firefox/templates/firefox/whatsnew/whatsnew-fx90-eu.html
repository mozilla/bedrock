{# This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/. -#}

{% from "macros-protocol.html" import split with context %}

{% extends "firefox/whatsnew/base.html" %}

{% block page_title %}{{ ftl('whatsnew-page-title') }}{% endblock %}

{#- This will appear as <meta property="og:description"> which can be used for social share -#}
{% block page_og_desc %}{{ ftl('whatsnew-page-description') }}{% endblock %}

{% block body_id %}firefox-whatsnew{% endblock %}
{% block body_class %}{% endblock %}

{% block page_css %}
  {{ css_bundle('firefox_whatsnew_90_eu') }}
{% endblock %}

{% block site_header %}{% endblock %}

{% set landing_source = '?source=' + campaign if campaign else '' %}

{% block content %}
<main class="content-wrapper mzp-t-firefox">
  {% include 'firefox/whatsnew/includes/header.html' %}

  <div class="mzp-l-content mzp-t-content-lg">
    <section class="wnp-content-main">
      {% include 'firefox/whatsnew/includes/fx90/mozilla-vpn-logo.svg' %}
      <h1 class="wnp-main-heading">{{ ftl('whatsnew90-main-heading') }}</h1>
      <p class="wnp-main-body">{{ ftl('whatsnew90-main-body') }}</p>

      <div class="wnp-main-cta">
        <a href="{{ url('products.vpn.landing') }}{{ landing_source }}" class="mzp-c-button mzp-t-product mzp-t-xl" rel="external" data-cta-text="Get Mozilla VPN" data-cta-type="button" data-cta-position="primary">{{ ftl('whatsnew90-main-cta') }}</a>
      </div>
    </section>

    <section class="wnp-content-extra">
      <div class="mzp-l-columns mzp-t-columns-two">
        <div class="mzp-c-picto">
          <div class="mzp-c-picto-image">
            {% include 'firefox/whatsnew/includes/fx90/stay-safe.svg' %}
          </div>
          <h3 class="mzp-c-picto-heading">{{ ftl('whatsnew90-block-1-heading') }}</h3>
          <div class="mzp-c-picto-body">
            <p>{{ ftl('whatsnew90-block-1-body') }}</p>
          </div>
        </div>

        <div class="mzp-c-picto">
          <div class="mzp-c-picto-image">
            {% include 'firefox/whatsnew/includes/fx90/home.svg' %}
          </div>
          <h3 class="mzp-c-picto-heading">{{ ftl('whatsnew90-block-2-heading') }}</h3>
          <div class="mzp-c-picto-body">
            {% if ftl_has_messages('whatsnew90-block-2-body-v2') %}
              <p>{{ ftl('whatsnew90-block-2-body-v2', servers=settings.VPN_CONNECT_SERVERS, countries=settings.VPN_CONNECT_COUNTRIES) }}</p>
            {% else %}
              <p>{{ ftl('whatsnew90-block-2-body') }}</p>
            {% endif %}
            <p></p>
          </div>
        </div>
      </div>

      <div class="c-availability">
        <h3 class="c-availability-heading">{{ ftl('whatsnew90-availability-heading') }}</h3>

        {% call split(
          block_class='mzp-l-split-center-on-sm-md mzp-t-split-nospace mzp-t-content-sm',
          media_class='mzp-l-split-h-center',
          media_include='firefox/whatsnew/includes/fx90/globe.svg',
          media_after=True
          ) %}
          <p>{{ ftl('whatsnew90-availability-body') }}</p>
          <p><a href="{{ url('products.vpn.landing') }}{{ landing_source }}" class="mzp-c-button mzp-t-product mzp-t-secondary mzp-t-xl" rel="external" data-cta-text="Get Mozilla VPN" data-cta-type="button" data-cta-position="secondary">
            {{ ftl('whatsnew90-main-cta') }}
          </a></p>
        {% endcall %}
      </div>

      <div class="c-press-logos">
        <h4 class="c-press-logos-heading">{{ ftl('whatsnew90-press-logos-heading') }}</h4>
        <ul class="mzp-c-inline-list">
          <li>
            <picture>
              <source srcset="{{ static('img/products/vpn/landing/logos/pcgamer-white.png') }} 1x, {{ static('img/products/vpn/landing/logos/pcgamer-white-high-res.png') }} 1.5x" media="(prefers-color-scheme: dark)" loading="lazy" width="109" height="38"></source>
              <img src="{{ static('img/products/vpn/landing/logos/pcgamer.png') }}" srcset="{{ static('img/products/vpn/landing/logos/pcgamer-high-res.png') }} 1.5x" loading="lazy" width="109" height="38" alt="PC Gamer">
            </picture>
          </li>
          <li>
            <picture>
              <source srcset="{{ static('img/products/vpn/landing/logos/cnet-white.png') }} 1x, {{ static('img/products/vpn/landing/logos/cnet-white-high-res.png') }} 1.5x" media="(prefers-color-scheme: dark)" loading="lazy" width="57" height="38"></source>
              <img src="{{ static('img/products/vpn/landing/logos/cnet.png') }}" srcset="{{ static('img/products/vpn/landing/logos/cnet-high-res.png') }} 1.5x" loading="lazy" width="57" height="38" alt="CNet">
            </picture>
          </li>
          <li>
            <picture>
              <source srcset="{{ static('img/products/vpn/landing/logos/gizmodo-white.png') }} 1x, {{ static('img/products/vpn/landing/logos/gizmodo-white-high-res.png') }} 1.5x" media="(prefers-color-scheme: dark)" loading="lazy" width="121" height="38"></source>
              <img src="{{ static('img/products/vpn/landing/logos/gizmodo.png') }}" srcset="{{ static('img/products/vpn/landing/logos/gizmodo-high-res.png') }} 1.5x" loading="lazy" width="121" height="38" alt="Gizmodo">
            </picture>
          </li>
          <li>
            <picture>
              <source srcset="{{ static('img/products/vpn/landing/logos/wired-white.png') }} 1x, {{ static('img/products/vpn/landing/logos/wired-white-high-res.png') }} 1.5x" media="(prefers-color-scheme: dark)" loading="lazy" width="108" height="38"></source>
              <img src="{{ static('img/products/vpn/landing/logos/wired.png') }}" srcset="{{ static('img/products/vpn/landing/logos/wired-high-res.png') }} 1.5x" loading="lazy" width="108" height="38" alt="Wired">
            </picture>
          </li>
        </ul>
      </div>
    </section>

    <aside class="mzp-l-content c-utilities">
      {% set releasenotes_url = url('firefox.releases.index') if not version else '/firefox/%s/releasenotes/'|format(version) %}
      <p>{{ ftl('whatsnew-release-notes', url=releasenotes_url) }}</p>
    </aside>
  </div>

</main>
{% endblock %}

{% block js %}
  {{ js_bundle('firefox_whatsnew') }}
{% endblock %}
