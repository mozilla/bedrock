{# This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/. -#}

{% from "macros-protocol.html" import hero with context %}

{% extends "firefox/base-protocol.html" %}

{% block page_title_prefix %}Firefox Concert Series - {% endblock %}
{% block page_title %}Watch free live concerts in Firefox{% endblock %}

{%- block page_desc -%}
  {%- if switch('firefox_concert_one_over') -%}
    Here’s to you. Here’s to live music. Here’s to watching free, from all kinds of artists, right from Firefox. Thanks for being part of our community. Firefox fights for you.
  {%- else -%}
    Live on 12/11 get a front row seat for one of the last shows on Phosphorescent’s C’est La Vie tour.
  {%- endif -%}
{%- endblock -%}

{%- block page_image -%}
  {%- if switch('firefox_concert_one_over') -%}
    {{ static('img/firefox/concerts/page-image.jpg') }}
  {%- else -%}
    {{ static('img/firefox/concerts/page-image-phosphorescent.jpg') }}
  {%- endif -%}
{%- endblock -%}

{% block page_css %}
  {{ css_bundle('firefox_concert_series') }}
{% endblock %}

{% block body_class %}firefox-concerts{% endblock %}

{% block content %}
<main role="main">
  <div class="concert-content">
    {% call hero(
      title=_('Here’s to you.<br> Here’s to live music.')|safe,
      desc=_('Here’s to watching it free, from all kinds of artists, right from Firefox.'),
      class='mzp-t-firefox mzp-t-product-firefox mzp-t-dark',
      include_cta=False,
      heading_level=1,
      image_url=None,
      include_highres_image=False,
      image_alt=''
    ) %}
    {% endcall %}

    <div class="artist-featured mzp-l-content l-content-narrow">
      <section class="artist-card mzp-c-card-feature mzp-has-aspect-16-9 mzp-t-firefox mzp-t-dark">
        <div class="mzp-c-card-feature-media-wrapper">
          <div class="mzp-c-card-feature-media">
          {% if switch('firefox_concert_one_live') %}
            <a class="video-play" href="http://firefoxconcerts.livenation.com" rel="external" title="Watch the livestream">
              <img src="{{ static('img/firefox/concerts/video-poster-phosphorescent.jpg') }}" alt="Phosphorescent (Matthew Houck) and his six-piece band perform on stage before a crowd. The lighting is tinted purple and the band is backed by a large, illuminated sign reading ‘C’est La Vie’, the title of their recent album.">
            </a>
          {% elif switch('firefox_concert_one_over') %}
            <img src="{{ static('img/firefox/concerts/video-poster-phosphorescent.jpg') }}" alt="Phosphorescent (Matthew Houck) and his six-piece band perform on stage before a crowd. The lighting is tinted purple and the band is backed by a large, illuminated sign reading ‘C’est La Vie’, the title of their recent album.">
          {% else %}
            <a class="video-play js-video-play" href="https://youtu.be/PcNpDCdkhLc" data-id="PcNpDCdkhLc" title="Play the video">
              <img src="{{ static('img/firefox/concerts/video-poster-phosphorescent.jpg') }}" alt="Phosphorescent (Matthew Houck) and his six-piece band perform on stage before a crowd. The lighting is tinted purple and the band is backed by a large, illuminated sign reading ‘C’est La Vie’, the title of their recent album.">
            </a>
          {% endif %}
          </div>
        </div>
        <div class="mzp-c-card-feature-content">
          <div class="mzp-c-card-feature-content-container">
          {% if switch('firefox_concert_one_live') %}
            <p class="mzp-c-card-tag live">Live</p>
          {% elif switch('firefox_concert_one_over') %}
            <p class="mzp-c-card-tag ended">Coming soon</p>
          {% else %}
            <p class="mzp-c-card-tag countdown" id="countdown-one">Starts in <span class="time days"></span> days, <span class="time hours"></span> hours</p>
          {% endif %}

          {% if switch('firefox_concert_one_over') %}
            <h2 class="mzp-c-card-feature-title">Next concert: To be announced</h2>
            <p class="mzp-c-card-feature-desc">The first concert is over, but we have more music in the queue. Check back here to find out who’s playing next in the Firefox Concert Series! Sign up below to be the first to know when the next show is announced.</p>
          {% else %}
            <h2 class="mzp-c-card-feature-title"><time datetime="2018-12-11T20:00:00-0500">Tuesday, Dec. 11</time>: Phosphorescent</h2>
            <p class="mzp-c-card-feature-desc">Livestreamed from DC’s 9:30 Club, get a front row seat for one of the last shows on Phosphorescent’s <cite lang="fr">C’est La Vie</cite> tour. Special guest Liz Cooper and The Stampede kick off the show 8:00pm EST.</p>
          {% endif %}

          {% if switch('firefox_concert_one_live') %}
            <p class="stream-link"><a href="http://firefoxconcerts.livenation.com" rel="external" class="mzp-c-button mzp-t-dark">Watch Now</a></p>
          {% endif %}
          </div>
        </div>
      </section>
    </div>

    <div class="fxa-cta mzp-l-content">
      <section class="mzp-c-card-feature mzp-has-aspect-16-9 mzp-l-card-feature-right-half mzp-t-firefox mzp-t-dark">
        <div class="mzp-c-card-feature-media-wrapper">
          <div class="mzp-c-card-feature-media">
            <img src="{{ static('img/firefox/concerts/concert.jpg') }}" alt="">
          </div>
        </div>
        <div class="mzp-c-card-feature-content">
          <div class="mzp-c-card-feature-content-container">

            <div class="conditional-content form-content">
              <div id="fxa-form-wrapper" class="fxa-form" data-fxa-metrics-endpoint="{{ settings.FXA_ENDPOINT }}metrics-flow" data-fxa-oauth-api-endpoint="{{ settings.FXA_OAUTH_API_ENDPOINT }}">
                <h2 class="mzp-c-card-feature-title">Get concert reminders.</h2>
                <p class="mzp-c-card-feature-desc">Find out when the next show starts – and grab the keys to your online life – with a Firefox Account.</p>

                <p class="agreement">
                {% trans url1='https://accounts.firefox.com/legal/terms', url2='https://accounts.firefox.com/legal/privacy' %}
                  By proceeding, you agree to the <a href="{{ url1 }}">Terms of Service</a> and <a href="{{ url2 }}">Privacy Notice</a>.
                {% endtrans %}
                </p>

                <form action="{{ settings.FXA_OAUTH_ENDPOINT }}">
                  <input type="hidden" name="client_id" value="{{ settings.FXA_OAUTH_CLIENT_ID }}">
                  <input type="hidden" name="scope" value="profile">
                  <input type="hidden" name="state" id="state" value="">
                  <input type="hidden" name="flow_id" id="flow_id" value="">
                  <input type="hidden" name="flow_begin_time" id="flow_begin_time" value="">
                  <input type="hidden" name="action" value="email">
                  <input type="hidden" name="utm_source" id="utm_source" value="mozilla.org">
                  <input type="hidden" name="utm_medium" id="utm_medium" value="concerts-landing-page">
                  <input type="hidden" name="utm_campaign" id="utm_campaign" value="firefox-concert">
                  <input type="hidden" name="utm_content" id="utm_content" value="">

                  <p>
                    <label for="name">Your email address</label>
                    <input type="email" name="email" required placeholder="yourname@example.com">
                  </p>
                  <p>
                    <button type="submit" class="mzp-c-button mzp-t-download" id="fxa-email-form-submit" data-button-name="Create an Account">Create an Account</button>
                  </p>
                </form>

                <p class="signin">Already have a Firefox Account? <a id="fxa-sign-in" href="{{ settings.FXA_OAUTH_ENDPOINT }}/signup?client_id={{ settings.FXA_OAUTH_CLIENT_ID }}&scope=profile&action=email" rel="external">Sign in</a></p>
              </div>
            </div>{#-- /.form-content --#}

            <div class="conditional-content verified-content">
              <h2 class="mzp-c-card-feature-title">You’re signed in!</h2>
              <p class="mzp-c-card-feature-desc">We’ll send you a reminder before the show starts.</p>
            </div>
          </div>
        </div>
      </section>
    </div>

  </div>{#-- .concert-content --#}

  <section class="excluded-content">
    {% call hero(
      title=_('Our apologies.'),
      desc=_('We are not able to stream these concerts outside the US.'),
      class='mzp-t-firefox mzp-t-product-firefox mzp-t-dark',
      include_cta=False,
      heading_level=1,
      image_url=None,
      include_highres_image=False,
      image_alt=''
    ) %}
    {% endcall %}

    <div class="mzp-l-content l-content-narrow">
      <p>But sign up for our newsletter to learn about Firefox happenings in your area.</p>

      <div class="mzp-c-newsletter">
      {{ email_newsletter_form(
          protocol_component=True,
          include_title=False,
          button_class='mzp-t-dark',
          email_label=_('Enter your email address'),
          details='<a href="%s" class="email-privacy-link">%s</a>'|format(url('privacy.email'), _('How will Mozilla use my email?'))|safe
      )}}
      </div>

      <aside class="email-privacy mzp-u-modal-content">
        <h3>{{ _('How will Mozilla use my email?') }}</h3>

        <p>
        {% trans
              manifesto=url('mozorg.about.manifesto'),
              principles=url('privacy.principles')
        %}
          Mozilla doesn’t just value your email privacy and security – it’s part of our <a href="{{ manifesto }}">Manifesto</a>: “Individuals’ security and privacy on the internet are fundamental and must not be treated as optional.” <a href="{{ principles }}">You can learn about our Data Privacy Principles here</a>.
        {% endtrans %}
        </p>

        <p><strong>{{ _('What we want you to know:') }}</strong></p>

        <ul class="prose mzp-u-list-styled">
          <li>{{ _('You don’t need to give us your email to download and use Firefox.') }}</li>
          <li>{{ _('We asked for your email because our research shows that people who receive an introductory experience do more and better with Firefox.') }}</li>
          <li>{{ _('You can expect emails designed to help you optimize Firefox to work best for you, learn more about privacy & security and find out how to make the best of your time on the web.') }}</li>
          <li>{{ _('You can unsubscribe anytime, for any reason.') }}</li>
          <li>{{ _('We will not share, sell or use your email for any other purposes.') }}</li>
        </ul>
      </aside>
    </div>
  </section>{#-- /.excluded-content --#}

</main>
{% endblock %}

{% block js %}
  {{ js_bundle('firefox_concert_series') }}
{% endblock %}
