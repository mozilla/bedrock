{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% extends "firefox/new/desktop/base.html" %}

{# FxA automated tests use this attribute to verify the page #}
{% block html_attrs %}data-test-fxa-template="firefox-download-thanks"{% endblock %}

{# "scene2" page should not be indexed to avoid it appearing in search results: issue 7024 #}
{% block canonical_urls %}<meta name="robots" content="noindex,follow">{% endblock %}

{% block extrahead %}
  {{ super() }}
  {{ css_bundle('firefox-thanks-install-win') }}
{% endblock %}

{% block site_header %}
  {% with hide_nav_download_button=True %}
    {% include 'includes/protocol/navigation/navigation.html' %}
  {% endwith %}
{% endblock %}

{% set referrals = '?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=firefox-download-thanks' %}

{% block content %}
<main>
  <div class="mzp-c-notification-bar mzp-t-success show-auto-download-notification">
    {# fallback_url is replaced by the platform download link via JS, but if
        something fails the user should still get a link to a working download path. #}
    <p>
      {{ ftl('firefox-desktop-download-your-firefox-new-should-begin', id='direct-download-link', fallback_url=url('firefox.all'))}}
    </p>
  </div>

  <div class="mzp-l-content mzp-t-content-xl">
    <div class="mzp-c-logo mzp-t-logo-lg mzp-t-product-firefox"></div>

    <h1 class="mzp-has-zap-8 c-section-title">Almost there! <br>Just a few steps to go.</h1>

    <ol class="c-install-steps mzp-l-columns mzp-t-columns-three">
      <li>
        <div class="c-install-steps-copy">
          <h2 class="c-install-step-title">
            <span>Step 1</span> Open Download
          </h2>
          <p>Open the Firefox Installer.exe file from the downloads list at the top right corner of this window.</p>
        </div>
        <div class="c-install-steps-image">
          <img src="{{ static('img/firefox/new/desktop/thanks/win-step-1.svg') }}" alt="">
        </div>
      </li>
      <li>
        <div class="c-install-steps-copy">
          <h2 class="c-install-step-title">
            <span>Step 2</span> Allow install
          </h2>
          <p>If prompted, click “Install anyway” and “Yes” on the system dialog.</p>
        </div>
        <div class="c-install-steps-image">
          <img src="{{ static('img/firefox/new/desktop/thanks/win-step-2.svg') }}" alt="">
        </div>
      </li>
      <li>
        <div class="c-install-steps-copy">
          <h2 class="c-install-step-title">
            <span>Step 3</span> Complete
          </h2>
          <p>Run the installer. Firefox will automatically open when the installation is finished.</p>
        </div>
        <div class="c-install-steps-image">
          <img src="{{ static('img/firefox/new/desktop/thanks/win-step-3.svg') }}" alt="">
        </div>
      </li>
    </ol>


  {% if ftl_has_messages('firefox-desktop-download-if-you-see-a-prompt', 'firefox-desktop-download-visit-support-for-more') %}
    <aside class="c-windows-disclaimer">
      <img class="c-windows-disclaimer-logo" src="{{ static('img/logos/windows/logo-windows-black.svg') }}" alt="{{ ftl('firefox-desktop-download-windows') }}" width="132" height="28">
      <p>{{ ftl('firefox-desktop-download-if-you-see-a-prompt', attrs='href="https://support.mozilla.org/kb/windows-10-warns-me-use-microsoft-verified-app%s" rel="external noopener" data-cta-type="link" data-cta-text="Get help with your installation"'|safe|format(referrals)) }}</p>

      <p><a href="https://support.mozilla.org/kb/windows-10-warns-me-use-microsoft-verified-app{{ referrals }}" rel="external noopener" data-cta-type="link" data-cta-text="Visit Support for More Details">{{ ftl('firefox-desktop-download-visit-support-for-more') }}</a></p>
    </aside>
  {% endif %}

    <div class="c-support-install">
      <p>
        {% set support_windows_attrs = 'href="https://support.mozilla.org/kb/how-download-and-install-firefox-windows%s" rel="external noopener" data-cta-type="link" data-cta-text="Get help with your installation"'|safe|format(referrals) %}
        {{ ftl('firefox-desktop-download-get-help', attrs=support_windows_attrs) }}
      </p>
    </div>

    {{ download_firefox(force_direct=true, dom_id='thanks-download-button') }}

  </div>
  <div class="c-support-lang">
    <a href="{{ firefox_url('desktop', 'all') }}">{{ ftl('firefox-desktop-download-in-another-language') }}</a>
  </div>
</main>
{% endblock %}

{% block js %}
  {{ js_bundle('firefox_new_thanks') }}
{% endblock %}
