{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% from "macros-protocol.html" import card with context %}
{% from "macros.html" import image with context %}

{% macro stories_split(title="", desc="", cta_href="", split_reversed=False, image_url="", class="", include_highres_image=False, image_alt='', media_after=False, loading=None) %}
<section class="mzp-c-split mzp-l-split-center-on-sm-md c-stories-split {% if class %} {{ class }} {% endif %}{% if split_reversed %}mzp-l-split-reversed{% endif %}">
  {% if cta_href %}
  <a class="mzp-c-split-container c-split-block-link" href="{{ cta_href }}">
  {% else %}
  <div class="mzp-c-split-container">
  {% endif %}
    {% if not media_after %}
      {% if image_url %}
        <div class="mzp-c-split-media">
          {{ image(
            url=image_url,
            class='mzp-c-split-media-asset',
            alt=image_alt,
            loading=loading,
            include_highres=include_highres_image,
          ) }}
        </div>
      {% endif %}
    {% endif %}
    <div class="mzp-c-split-body">
      <h2 class="c-split-title">{{ title }}</h1>
      <p class="c-split-desc">{{ desc }}</p>
      <p class="c-split-cta" href="{{ cta_href }}">View Story</p>
    </div>
    {% if media_after %}
      {% if image_url %}
        <div class="mzp-c-split-media">
          {{ image(
            url=image_url,
            class='mzp-c-split-media-asset',
            alt=image_alt,
            loading=loading,
            include_highres=include_highres_image,
          ) }}
        </div>
      {% endif %}
    {% endif %}
    {% if cta_href %}
  </a>
  {% else %}
  </div>
  {% endif %}
</section>
{%- endmacro %}

{% macro stories_card(title="", image_url="", link_url="", desc="", class="", aspect_ratio='mzp-has-aspect-3-2', image_alt="") %}
  <section class="mzp-c-card c-stories-article-card {% if class %}{{ class }}{% endif %} {% if aspect_ratio %}{{ aspect_ratio }}{% endif %}">
    <a class="mzp-c-card-block-link" href="{{ link_url }}">
      <div class="mzp-c-card-media-wrapper">
        {{ image(
          url=image_url,
          class='mzp-c-card-image',
          alt=image_alt,
          loading="lazy",
          include_highres=include_highres_image,
          include_l10n=l10n_image
        ) }}
      </div>
      <div class="mzp-c-card-content">
        <h3 class="mzp-c-card-title"><span>{{ title }}</span></h3>
        <p class="mzp-c-card-desc">{{ desc }}</p>
      </div>
    </a>
  </section>
{% endmacro %}

{% macro stories_image(image_url="", alt="", caption="", include_highres=False, image_class="", width="1360", height="765", featured=False) %}
  <figure class="c-stories-image {% if image_class %}{{ image_class }}{% endif %}">
    {% if featured %}
    <p class="featured-label">Featured</p>
    {% endif %}
    {{ image(
      url=image_url,
      alt=alt,
      width=width,
      height=height,
      loading=None,
      include_highres=include_highres
    ) }}
    {% if caption %}
      <figcaption>Photo: {{ caption }}</figcaption>
    {% endif %}
  </figure>
{%- endmacro %}

{% macro stories_article_blockquote(quote="") %}
  <blockquote class="c-stories-article-blockquote">{{ quote }}</blockquote>
{% endmacro %}


{% macro stories_landing_card(image_url="", image_alt="", include_highres_image=False, class="", width="1360", height="765", featured=False, title="", desc="", include_cta=False, link_url="", size="md", aspect_ratio='mzp-has-aspect-3-2', heading_level=2)%}
<section class="mzp-c-card c-stories-landing-card size-{{ size }} {% if class %}{{ class }}{% endif %} {% if aspect_ratio %}{{ aspect_ratio }}{% endif %}" {% if attributes %}{{attributes|safe}}{% endif %}>
  {% if link_url %}
  <a class="mzp-c-card-block-link" href="{{ link_url }}">
  {% endif %}
    {% if featured %}
     <p class="featured-label">Featured</p>
    {% endif %}
    {% if image_url %}
    <div class="mzp-c-card-media-wrapper">
      {{ image(
        url=image_url,
        alt=image_alt,
        width=width,
        height=height,
        loading="lazy",
        include_highres=include_highres_image,
      ) }}
    </div>
    {% endif %}
    <div class="mzp-c-card-content">
    {% if tag_label %}
      <div class="mzp-c-card-tag">{{ tag_label }}</div>
    {% endif %}
      <h{{ heading_level }} class="mzp-c-card-title"><span>{{ title }}</span></h{{ heading_level }}>
    {% if desc %}
      <p class="mzp-c-card-desc">{{ desc }}</p>
    {% endif %}
    {% if include_cta %}
      <p class="mzp-c-card-cta"><span class="mzp-c-card-cta-text">View Story</span></p>
    {% endif %}
    </div>
  {% if link_url %}
  </a>
  {% endif %}
</section>
{% endmacro %}

