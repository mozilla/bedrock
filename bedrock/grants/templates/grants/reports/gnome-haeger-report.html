{# This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/. #}

{% extends "grants/base.html" %}

{% block page_title %}GNOME accessibility final report - Grants{% endblock %}
{% block body_id %}grants{% endblock %}

{% block article %}

<h1>GNOME accessibility</h1>

<h2>Report: Best of LSR and ARIA Support in Orca Milestone 4</h2>
<p><b>ARIA Widget and Live Region Support<br>
By Scott Haeger</b></p>

<h3>Summary</h3>

<p>This milestone period encompassed four areas: continued work on ARIA widget support, live region support, Collection bug fixes and Collection integration into Orca. Each topic will be covered below.</p>

<h3>ARIA Widgets</h3>

<p>ARIA widget support continued from the fourth milestone period and is at a point where I consider it finished. This milestone period included adding support for alerts/tooltips, coordinating with developers to tweak several Dojo and UIUC widgets, and creation of several Orca ARIA related regression tests. The current support level for ARIA widgets is now best seen at the Orca ARIA Widgets wiki. The three tables listed show the support level of Orca and the AT&#xad;SPI support level in Firefox for each widget type.</p>

<h4>ARIA Widget Test Sets</h4>

<p>In previous milestone periods I defined three sets of ARIA widgets that I would use for testing. These test sets include pre&#xad;existing and newly developed Mozilla developer test widgets, The Dojo Widget Toolkit, and the Illinois Center for Information Technology Accessibility (UIUC) ARIA widget examples. Orca now has a set of regression tests that can verify Orca support for most of the ARIA widgets in each set.</p>

<h3>Live Regions</h3>

<p>The current support level for live regions in Orca is best seen on the Orca Live Region wiki. In summary, live region support for both properly marked up web pages and pages without proper ARIA markup has been in Orca for a couple weeks now and is working quite well. In addition, I wrote a few Greasemonkey scripts, which 'inject' live region markup for a few popular sports scoreboards that do not function well without proper markup.Orca live region support is now quite good for popular finance, scoreboards and web based chat sites.</p>

<h3>Collection</h3>

<p>The level of Collection integration into Orca is best seen on the Orca Collection Integration wiki. In summary, the page summary feature and many of the 'go to' user navigation functions in the Gecko script now have an alternative implementation using Collection. A global Orca variable allows the user to toggle the use of the new implementation and backward compatibility is maintained so the user is not forced to use the trunk version of at&#xad; spi. Overall, the Collection interface gives about a 5&#xad;7 times performance increase for the navigation functions.</p>

<h4>Collection Bug Fixes</h4>

<p>It was essential that two critical Collection bugs be fixed before the Orca integration work. I was instrumental in fixing both of the following bugs:<p>
<ul>
<li><a href="http://bugzilla.gnome.org/show_bug.cgi?id=496232">496232</a> &#x2013; Add traverse flag to Collection.getMatches[From|To]</li>
<li><a href="http://bugzilla.gnome.org/show_bug.cgi?id=517761">517761</a> &#x2013; Collection match rules not working for attributes</li>
</ul>


<h4>Collection Integration into Orca</h4>

<p>The following bug reports were used to track the integration into Orca work:</p>

<ul>
<li><a href="http://bugzilla.gnome.org/show_bug.cgi?id=490568">490568</a> &#x2013; Implement Firefox page summary using Collection</li>
<li><a href="http://bugzilla.gnome.org/show_bug.cgi?id=491837">491837</a> &#x2013; Implement Gecko 'go to' functions using Collection</li>
<li><a href="http://bugzilla.gnome.org/show_bug.cgi?id=519587">519587</a> &#x2013; Navigating nested lists with Collection not functioning properly</li>
</ul>


<h3>Documentation</h3>
<p>The following wiki pages have been maintained during this milestone period:</p>

<p><a href="http://live.gnome.org/Orca/Firefox/ARIAWidgets">Orca ARIA Widget Support</a> &#x2013; This page describes ARIA widgets to the Orca user community, gives links to examples, and lists the level of support for each widget type.</p>

<p><a href="http://live.gnome.org/Orca/Firefox/LiveRegions">Orca Live Region Support</a> &#x2013; This page describes Live Regions to the Orca user community, gives links to examples, describes Greasemonkey and it's potential solution for Live Regions markup, and describes the level of support for popular websites containing Live Region.</p>

<p><a href="http://live.gnome.org/Orca/Collection">Orca Collection Interface Integration</a> &#x2013; This page describes the Collection Interface to the Orca user community and describes what features have been upgraded using the Collection Interface.</p>

<p><a href="http://developer.mozilla.org/en/Accessible_DHTML">Mozilla Developer's Center ARIA page</a> &#x2013; Validated all widgets for AT&#xad;SPI support.</p>

<p>In addition, the new <a href="http://developer.mozilla.org/en/Accessibility/LiveRegionDevGuide">Mozilla Developer's Guide to Live Regions</a> has been added during this milestone period.  This provides a set of guidelines an AT developer can reference when implementing live regions.</p>

<h3>Bug Report and Code Submittal</h3>

<h4>Mozilla</h4>

<p>The following is a list of bugs that I have submitted since the beginning of my grant:</p>

<ul>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=390298">390298</a> - ATK hierarchy inconsistent for ARIA spinners</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=392061">392061</a> - Live region object attributes are not being persisted for AT- SPI</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=393279">393279</a> - ARIA checkboxTriState do not trigger object:state- changed:checked events</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=394318">394318</a> - ARIA trees are triggering an unnecessary ATK caret- moved event</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=395041">395041</a> - STATE_SELECTED should be used in single select containers that use activedescendant</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=395699">395699</a> - relations not working when pointing to a &lt;span&gt;</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=395900">395900</a> - Image frame changes causes recreation of ATK objects</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=395902">395902</a> - children-changed event points to wrong child for lists</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=397485">397485</a> - Embed characters to children not 1:1</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=402049">402049</a> - ARIA tooltips triggering many repeated AT-SPI events</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=402597">402597</a> - AT-SPI Accessibility:Event.user_data None for ARIA tooltips/alerts</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=412288">412288</a> - Toolbar menus do not have ATK state focusable</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=412965">412965</a> - ARIA sliders and progressbars should not support ATK IText</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=413394">413394</a> - ARIA role="presentation" adds whitespace to AT-SPI IText output</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=415069">415069</a> - ARIA alerts triggering events with :system</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=415776">415776</a> - AT-SPI Collection Interface crashes Firefox</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=415919">415919</a> - No AT-SPI focus event when returning focus to Firefox</li>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=417249">417249</a> - AT-SPI document load complete events not triggered everytime</li>
</ul>

<h4>Orca</h4>
<p>The dependency tree for the Orca ARIA support bug is the best view of the ARIA bugs and the dependency tree for the Orca Collection support bug is the best view of the Collection bug that I have been working on for Orca. Peer reviewed source code was submitted to the trunk branch of Orca's Subversion repository. ARIA widget support appeared in Orca versions as it was made available. Major Live Region support was added to the 2.21.90 and minor changes were added to the 2.21.92 release. Collection support is targeted for the 2.22.0 release.</p>

{% endblock %}